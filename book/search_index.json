[["index.html", "Data Journalism - A Quick &amp; Practical Guide Data Journalism - A Quick &amp; Practical Guide", " Data Journalism - A Quick &amp; Practical Guide Rob Wells - thanks to Yihui Xie 2021-06-02 Data Journalism - A Quick &amp; Practical Guide Rob Wells, Ph.D. rswells@uark.edu Twitter: rwells1961 Inspiration: Mapping in Tableau Please review this mapping tutorialbasic-mapping-transcriptSample WorkbookVideos: https://www.tableau.com/learn/tutorials/on-demand/getting-started-mapping?playlist=230855 Build a Map COVID-19 Positivity in Arkansas CountiesData: County data for one day. –Import the countyonlytoday.csv data as text into Tableau–Check the geographic role of county is assigned to county.–Go to Sheet 1:a) drag Longitude to columnsb) Latitude to rowsc) County Name to the pane–A map of Arkansas appears.d) In top Menu: MAP | Edit Locations | State / Province | Fixed - Select the great state of Arkansas–The map now has all counties represented as dotse) In Marks card: Change Automatic to Mapf) drag Positive to the pane - you now have a map of positive rates by county.Video below with all of these steps: Dual Mapping - Bubble Maps Tutorialhttps://onlinehelp.tableau.com/current/pro/desktop/en-us/maps_dualaxis.htmlUsing countyonlytoday.csv New sheet, begin map: Drag counties to mapFix the missing counties: Map | Edit Locations | Fixed | ArkansasMarks Card | MapDrag Deaths map Here’s where it is tricky: Click on Longitude pill in Columns. Press Command key. Drag to Right. Release mouse–Creates two Longitude pills and two maps–Marks Card Now Has Controls for Two MapsMarks Card Has Two Maps. Lower Map, Drag off color pill. Marks Card, switch to Circle.Drag Deaths to Size. Enlarge the CirclesDrag Deaths to Labels. In Columns, Select Down Arrow on Longitude | Dual Axis–Maps are combined Drag County to Marks Card | TooltipEdit Tooltips so data displays properly Teams For the first class, please have Teams installed so we can do some exercises. Teams is free through your university Office365 account. Download the Teams App through the Office365 suite. https://its.uark.edu/communication-collaboration/office365/office365-desktop-apps.php Teams Videos Microsoft Teams allows us to easily share information through the class or in discrete groups. Chat in Teams https://www.microsoft.com/en-us/videoplayer/embed/RE4rLgJ?pid=ocpVideo5-innerdiv-oneplayer&amp;postJsllMsg=true&amp;maskLevel=20&amp;market=en-us Create a post https://www.microsoft.com/en-us/videoplayer/embed/RE2BIrO?pid=ocpVideo0-innerdiv-oneplayer&amp;postJsllMsg=true&amp;maskLevel=20&amp;market=en-us How to tag a person in Teams https://www.microsoft.com/en-us/videoplayer/embed/RWkJ9C?pid=ocpVideo0-innerdiv-oneplayer&amp;postJsllMsg=true&amp;maskLevel=20&amp;market=en-us "],["data-journalism-a-quick-practical-guide-1.html", "Chapter 1 Data Journalism - A Quick &amp; Practical Guide 1.1 Outline - Introduction - Table of Contents 1.2 Table of Contents 1.3 Introduction to data analysis 1.4 Section 2: Data Analysis Tools 1.5 Section 3: R for data journalists 1.6 Section 4: Publishing your work 1.7 Appendix 1.8 NOTES", " Chapter 1 Data Journalism - A Quick &amp; Practical Guide 1.1 Outline - Introduction - Table of Contents Each chapter would cover 5 to 10 pages. Much of the material will consist of original content I have prepared using open government datasets, such as the Arkansas Department of Health Covid-19 data or the FBI’s crime statistics. I have been trained about the Fair Use issues and do not anticipate copyright issues. Images will be screenshots I generate from my lessons. The chapters will include links to other web resources, such as the Tableau Public frequently asked questions. The chapters will include links to original video content I produced for my classes and that is hosted on video.uark.edu. 1.2 Table of Contents 1.3 Introduction to data analysis –Introduction to data analysis, including math for journalists Basics of Data Analysis Numbers in the Newsroom Excel Exercise: Transit Data and Calculating a Rate Review: Mac OSX Basics –Organizing your workflow Best practices in data management Organizational tips for files Data documentation skills –Data cleaning Filtering Reading Data Dictionaries Data Cleaning Exercises –Data Visualization Principles of Data Visualization Cleveland McGill Scale Important Resources for Surveying the Data Visualization Options Color Choices Build a Cover Image Using Canva or InDesign or Powerpoint Higher Resolution Graphics in Tableau –Writing About Data Writing Style Notes Common Errors – Math AP Style with Numbers –Excel Bootcamp Review four corners How to Filter in Excel Basics and Sorting in Excel Practice Rates and Ratios Excel formulas Pivot Tables Countif Function 1.4 Section 2: Data Analysis Tools –Basic Tableau Downloading instructions for Tableau Getting started tutorial with video Building a basic COVID data chart with video and transcript Using filters and calculations with video and transcript Tutorial on Tableau calculations with video Proper formatting of a filter bar in Tableau, video Links to additional Tableau Tutorials –Tableau - Maps Mapping tutorial &amp; sample dataset Build a Map COVID-19 Positivity in Arkansas Counties Video Dual Mapping - Bubble Maps –Basic Flourish Videos to Get Started Beginning Documents Flourish Design Tips More Resources Adam Marton Cheat Sheet Flourish newsrooms plan Flourish - Stories Examples from Fall Class Basic Map Flourish Links –Basic Datawrapper First Datawrapper Chart Tutorials Adam Marton Datawrapper Training Automatic chart updates Maps in Datawrapper 1.5 Section 3: R for data journalists –Introduction to R Install R and R Studio. Basic tutorial on R https://profrobwells.github.io/Guest_Lectures/Intro_To_R/R1_Intro-to-R.html Reading Reproducible research Repetitive tasks in modern newsrooms Popular R Libraries Data Types and R Reference: Logical Operators in R Packages Important Reference Materials R and R Studio CHECK REPETITION –R data visualization Basic GGPLOT Using color Formatting PNG for export Scatterplots Histograms Box plots Line graphs ggplot cookbook 4-26-20.rmd –R data cleaning Data cleaning exercises using SF police data Clean names, Process dates top_n: table with just the top five counties&#39; crime rate Grouping by Disposition Filters A more complex filter String manipulation Rename specific strings: str_replace_all Using a lookup table to replace all the values gsub - delete space convert all text to lowercase Make into html table Make bubble chart R Markdown to distribute findings to Stanford, Feb 2020 https://profrobwells.github.io/HomelessSP2020/SF_311_Calls_UofA.html Homeless Children, Feb 25 https://profrobwells.github.io/HomelessSP2020/Homeless_Children_Feb_25_2020.html –Cookbook of common tasks 1.6 Section 4: Publishing your work –WordPress Using WordPress Access back end Embedding interactive data Embed Flourish in WordPress Embed Tableau in WordPress Building the Web Page –GitHub for beginners 1.7 Appendix –Teams and Slack 1.8 NOTES Lectures Investigative Reporters and Editors Inc., Society for Advancing Business Editing and Writing and similar national journalism organizations 1.8.1 Instructions from OER project outline and project completion timeline. Please include examples or links to content you will use (if known), drafts of any completed chapters or other supporting documentation. Please also include anticipated needs for support from the OER team such as assistance searching for resources, instructional design support or assistance creating ancillary materials or graphics You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter ??. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter ??. "],["introduction-to-data-analysis-1.html", "Chapter 2 Introduction to Data Analysis", " Chapter 2 Introduction to Data Analysis Sections in this Module Basics of Data Analysis Numbers in the Newsroom Excel Exercise: Transit Data and Calculating a Rate Review: Mac OSX Basics Basics of Data Analysis TransparencyReliability: How sure are we that we got the right answer? That we’ve done everything correctly?Replicability: If we had to do it all again, would we get the same answer? If someone else did it, would they?Transparency: If our results are challenged, can we show exactly what we’ve done to defend it?–Matt WaiteData Analysis — Review methodology with one or more other data people— Check results to other available comparable data— Ensure all record counts are consistent across stages— Check averages — Examine outputs to ensure logical consistency (do things that should add up to 100% add up to 100%?)— Recheck all coding line by line if possible or in aggregate if not — Re-read all programs/scripts— Re-run entire analysis from scratch— Check each number against analysis or source material prior to publication— Recheck each number against analysis or source material on each draft Credit: Daniel Lathrop. Dallas Morning News AP Stylebook Entry on Data Journalism Data sources used in stories should be vetted for integrity and validity. When evaluating a data set, consider the following questions:–What is the original source for the data? How reliable is it? Can we get answers to questions about it?– Is this the most current version of the data set? How often is the data updated? How many years of data have been collected?–Why was the data collected? Was it for purposes of advocacy? Might that affect the data’s reliability or completeness? Does the data make intuitive sense? Are there anomalies (outliers, blank values, different types of data in the same field) that would invalidate the analysis?–What rules and regulations affect the gathering (and interpretation) of the data?–Is there an alternative source for comparison? Does the data for a parallel industry, organization or region look similar? If not, what could explain the discrepancy?–Is there a data dictionary or record layout document for the data set? This document would describe the fields, the types of data they contain and details such as the meaning of codes in the data and how missing data is indicated. If the data collectors used a data entry form, is the form available to review? For example, if the data entry was performed by inspectors, is it possible to see the form they used to collect the data and any directions they received about how to enter the data?Data and the results of analysis must be represented accurately in stories and visualizations. Any limitations of the data must also be conveyed. If one point in the analysis is drawn from a subset of the data or a different data set altogether, explain why this was done.Use statistics that include a meaningful base for comparison (per capita, per dollar). Data should reflect the appropriate population for the topic: for example, use voting-age population as a base for stories on demographic voting patterns. Avoid percentage and percent change comparisons from a small base. Rankings should include raw numbers to provide a sense of relative importance.When comparing dollar amounts across time, be sure to adjust for inflation. When using averages (that is, adding together a group of numbers and dividing the sum by the quantity of numbers in the group), be wary of extreme, outlier values that may unfairly skew the result. It may be better to use the median (the middle number among all the numbers being considered) if there is a large difference between the average (mean) and the median.Correlations should not be treated as a causal relationship. Where possible, control for outside factors that may be affecting both variables in the correlation. Use round numbers where possible, particularly to avoid a false appearance of precision. Be clear about limitations of sample size in reporting on data sets. See the polls and surveys section for more specific guidance on margin of error.Try not to include too many numbers in a single sentence or paragraph. A refresher on AP Stylebook on numbers How to Lie With Statisticshttps://www.datasciencecentral.com/profiles/blogs/how-to-lie-with-visualizations-statistics-causation-vs &nbsp; Sheffo, Catherine. “How to Avoid 10 Common Mistakes in Data Reporting.” American Press Institute (blog), August 9, 2016. https://www.americanpressinstitute.org/publications/data-reporting-common-mistakes/ Writing Assignment Write a minimum two paragraphs on the Basics of Data analysis readings. Discuss two items that impressed you the most and explain why. Due XXXX, 11:59 pm on Blackboard. Numbers in the Newsroom Sarah Cohen, Math Diva Sarah Cohen’s “Numbers in the Newsroom” is a classic in journalism numeracy. She is a Pulitzer-winning journalist at The Washington Post, a former Duke University professor, a data journalist at The New York Times., now a professor at Arizona State University. That’s why we read her book. Limit yourself to 8- 12 digits, including dates such as 2012, in a single paragraph.–This allows us to stress the most important numbers –Simplify your story using rates, ratios or percentages. “One in four” = ratio or rate. “Forty percent” = ratio or rate. 235 deaths per 100,000 is another. See pg. 11 *Memorize some common numbers on your beat: Population of Fayetteville. Population of Arkansas. Population of the U.S. Per capita income Arkansas and U.S. Round off! Unless you’re dealing with really small numbers, decimal points may not be meaningful. “I’m a big fan of rounding,” Cohen said. To make a very small number more understandable, divide it into 1. For example, .0081 is the proportion of the U.S. population who die every year. 1/.0081 translates to 1 in every 124 Americans die each year.* If you have a story filled with numbers – and not people — it needs to be really, really short. Portion of whole – For example, at the time of the Million Man March in 1995, a turnout of 1 million black men would have represented 1/12th of all the black men in the country at the time. Rates and Ratios Numbers in the Newsroom: Rates and Ratios Class exercise: Cohen: Think in ratios – construct a ratio on the poverty beat. Memorize common numbers on the beat: Use the Census Poverty Data: ;US Ark Counties Poverty ACS_16_5YR_DP03_with_ann-1w6iwss –In the spirit of “memorizing numbers on your beat,” find three statistics about poverty in this dataset –Construct a rate or ratio about the number of households earning $15,000 to $24,999 for the U.S., Arkansas, and the counties with the highest and lowest percentages in this category. Remember – “percents are Fractions. Fractions are percents” Cohen Numbers in Newsroom - Common mistakes.pdf Write a paragraph with at least two questions or observations. Excel Exercise: Transit Data and Calculating a Rate Basic Excel: http://www.interhacktives.com/2015/11/02/quick-tips-excel-google-sheets/ This exercise involves calculating train rate fatalities.Click here for the instructions:Exercise4Click here for the data:transitNotes:–Create data dictionary, backup, do four corners test–Be very careful about copying different block of data to a new sheet: mixups–Copy labels over and then delete them just to be sure all is aligned–Class walkthrough with 2008 - 2009 derailments–Be very specific about the headers: Total Derailments 2009, Vehicle Revenue Miles–Word Wrap for headers–We are constructing two derail rates, one in 2009 and another in 2008.–Results are 0? Wait, check the decimal tool–Results to two decimals. Rarely more than that–Copy of acronym definitions to data dictionaryExercise #1:–Calculate derailment rates for 2008-2013, determine the average rate, which agency had the highest average rate?Exercise #2:–Calculate the rate of fatalities (excluding suicides) by total miles (vehicle revenue miles)–Copy all of the Total Heavy Rail Fatality Sum, excluding suicides and all of the Vehicle Revenue Miles (VRM)–Create rates for each year, then average them Which city has the highest rate of fatalities (excluding suicides) over the last six years and where does Chicago rank? Exercise #3:Over the six years, did Chicago transit have more derailments than other major city transit systems? Is it getting better or worse? Which year was the worst for all major transit in terms of fatalities (excluding suicides)? How many suicides happened at CTA in 2013? What questions should I ask the DOT data clerks regarding the data? What other data might be useful to mine after this story runs?Resources: Excel Formulas in NICAR Coursepack transit Relative Risk “Black applicants are denied mortgages at twice the rate of whites with similar incomes.” If 20 smokers per thousand contract cancer, and yet non-smokers have a cancer rate of only 10 per thousand, the relative risk of smoking is 2. “More than” or “less than” = compute difference between the smokers, an extra step Example: Relative RiskFiguring Rates – Numbers in NewsroomMathCrib-Doig Excel Exercises Click here for: Basics and Sorting in ExcelClick here for: CityBudget.xls Make Two Folders: Original. Working.Duplicate Spreadsheet: Right Click | DuplicateData Dictionary: Who are you and where did you come fromCopy sheets, Rename TabsCopying Formulas: The Black + SignSortingBrain Storm: Story Ideas from Sorting DifferenceFormatting Data in DollarsPercentage Change: NOO!Part of Whole: Anchoring Values - i.e. $C$17Basic Chart Click here for the data: UrbanPopClick here for assignment: Exercise #1 Answer these questions:Sorting–Which urban agglomeration was the largest in 1950?–Which is expected to be the largest in 2030? Percentage ChangeFormula: (New number-Old Number)/Old Number * 100 and use % symbolCreate columnWhat is difference.—copy forumulaWhat is percentage change—copy formula Percentage Change–Which had greatest rate of change between 1950-2015?–Are any urban areas expected to lose population from 2010 to 2030?–If so, how many and which one is expected to lose the most?–Which United States urban area is expected to have the largest percent increase from 2015 to 2030? Refresher on Mac OSX operating systemHere is a short video course that you can skim through and get up to speed on how to use the Apple operating system, OSX.https://www.linkedin.com/learning/macos-mojave-essential-training/understand-macos-the-foundation-of-working-with-a-mac?u=50849081I would hammer through the following as soon as possible.Chs. 1, 3 are importantChapter 2: Finder will be crucial.Ch. 5 on downloading from the web is importantCh. 4, 13 should be skimmedChs 6-11 aren’t important for our class To Add: Quiz Excel Quiz Due Sept. 7, 11:59 p.m. https://learn.uark.edu/webapps/assessment/take/launchAssessment.jsp?course_id=_244039_1&amp;content_id=_7327798_1&amp;mode=cpview Quiz: Basic Excel. See Blackboard. Quiz due Saturday, Sept. 7 Excel Exercises: NICAR Coursepack Intro Excel w Exercise #1 Exercise Filtering: Crime Rates and Ratios --Find Average Crime Rate Statewide --Filter above and below average --Find Average Population --Filter above and below average NICAR coursepack: Pivot Tables In class exercise: MLB Salaries QUESTIONS 1) Did the National League or the American League pay more in salaries? Who has the higher average salary? 2) Which division pays the most in salaries? The least? 3) Which team had the most players on the roster? In-class exercise WorldBank Using the WorldBank data , build a Pivot Table. --Trick: Shift+Ctrl+8 --Produce a list ranking the countries with the most companies disbarred, sorted descending. Copy the results and paste into a new tab. --Produce a list of the firms that have more than one disbarment, sorted descending. Copy the results and paste into a new tab. What is the most common violation, and how many times did it occur? Pivot Table Class Exercise: Student Loans - Pivot Table Analyze Student Loan Data Sort the Data: -Sort by Schools with Largest Enrollment. Write a text answer with the top five schools by enrollment. -Sort by Schools with Highest Median Debt for Graduates. Write a text answer with the top five schools by Median Debt for Graduates. -Sort by Schools with Highest Median Debt for Student Who Withdrew. Write a text answer with the top five schools byHighest Median Debt for Student Who Withdrew. Megan Putney, Mike's Hard Lemonade https://training.uark.edu/professional-development/courses/tableau.php "],["organize-your-data.html", "Chapter 3 Organize Your Data", " Chapter 3 Organize Your Data This module addresses:–Best practices in data management–Organizational tips for files–Data documentation skills Staying organized is a key problem for beginning data students.You can’t find files. You have duplicate files and struggle to find the latest version.Your data software fails because it can’t find your files.You can’t remember where you got the source data or what the headers mean.You waste hours with this stuff when you really should be reporting. I want to put an end to this nightmare. These organizational tools below are essential. Storage Create a folder on your hard drive, call it Dataspring21, and put all class materials in that folder. --Within Dataspring21, create the following folders. 1) Final_Work 2) Older_Files Other people will have these standard folders in their projects. Up to you if you want to do this --Data --Scripts --Storage --Output BACK IT UP. Early, often, always, constantly. Purchase a 2 TB USB external storage drive, such as this Organize Your Data: Finder Finder, not always up for the job Sort by grid, by date.–This allows you to see the latest version of your files. Path name.–Follow this convention: Description of File With Some Detail, Date. If you are editing something, put your initials at the end.–i.e.: Covid_Master_File_Jan_11_2021-rsw Copying File Paths from the Mac Finder.Navigate to the file or folder you wish to copy.Right-click (or Control+Click, or a Two-Finger click on trackpads) on the file or folder in the Mac Finder While in the right-click menu, hold down the OPTION key to reveal the “Copy (item name) as Pathname” option, it replaces the standard Copy optionOnce selected, the file or folders path is now in the clipboard, ready to be pasted anywhere Data Diary This is a brief description of the source of your data, what actions you took, commands you ran, thinking behind what you are doing. Data Biography Template Interviewing Data Sample Data Diary Entry Data Dictionary For all of your spreadsheets, create a separate tab and include the following: --Full name data set --Full URL --Date of data --Any code book to define the column or row headings For your Tableau and R scripts, note the same in a Data Dictionary file that you can access easily in cloud storage. Suggestion: Evernote (free version, storage limits); Notepad in iOS; Note in Gmail; Google Doc; Notes in iOS; Stickies in iOS; etc. Data Diary ExamplesThe following material was posted on NICAR-L, a listserv for data journalists. There are some great examples of how the pros use data diaries / data dictionaries in their workflow.1) GeoffThis is a great question, and I’m finding as I think through my response that it’s helpful to remind myself of good practices.I use Jupyter notebooks for when I’m doing analysis or exploration in Python or SQL and R Markdown for when I’m doing it in R. However, I would stress that any data diary you keep and keep in a detailed way that is useful to you and others later, regardless of format, is better than the one you don’t.https://github.com/newsapps/public-notebooks/blob/master/Shooting%20victims%20by%20block.ipynb is an example of a representative but not great notebook for a small data task.A few things that I try (but don’t always succeed) to do:– Link to the source data, summary reports and codebooks near the top of my notebook. This is both a convenience to me, because I refer to these often, and especially to others who may not have seen those things before.– Put a high level summary of why I’m interested in the data and what I’m trying to find at the top of the notebook. This keeps me focused as I’m doing my exploration and also is helpful for others who might be skimming.– Keep a parking lot of questions (or potential concerns about validity or cleanliness of data) near the top of the notebook. That way I can quickly capture things I think about as I’m exploring or analyzing the data, while still staying focused.– Near the end of my day (or the first thing the next morning), do a quick pass over a notebook I worked on during the day. Do my notes still make sense? Are they as clear as they could be? If not, try to clean them up. If I don’t have time at the moment, I at least leave a “TODO” note to flag the section as needing some love.– Share the notebook with someone else as early as possible, even if you’re still in-progress. This is the most helpful way to know if I’m capturing your process with enough granularity. Or maybe I’m getting too granular. If so, is there a way to summarize process and findings at the top of a section?– If using code, don’t give a play-by-play of the code in text. Instead, describe what I’m trying to find out, why it’s important and why I’m taking a particular approach. Also note any assumptions my code is making.Hopefully this is helpful.Best,Geoff2) Christian McDonaldOh, do I have feelings about this one…I keep a data diary for myself that has everything from notes about public information requests, notes about where I got data, descriptions of what I did, sql queries and all kinds of things. I sometimes also make a data report that is really RESULTS of what I learned, as opposed to how I got there in the data diary. The data report is more for other reporters, editors and maybe sources, but the diary is for me, so less formal.These days I’m trying to script more of my work using Jupyter Notebooks, which then tends to be a mix of the two. It has info about where the data came from and the code that made the result. Sometimes it is written for future me, sometimes for the public. Generally, I’ll still keep a personal data diary just for my future self, ‘cause I can’t remember what I did yesterday much less last week.Data diaries I tend to write in markdown files on my machine so code doesn’t get wigged with curly-quote translations. Data reports are typically Google Docs or Jupyter Notebooks on Github. "],["data-cleaning.html", "Chapter 4 Data Cleaning", " Chapter 4 Data Cleaning Census Data and Data Cleaning Filtering Reading Data Dictionaries Data Cleaning in Excel: =Trim, Paste Special, Values, Transpose, Find and Replace Basic Population - Race Census Data Download Instructions Census: data.census.gov https://data.census.gov Data Cleaning Exercises Pivot Tables, Data Cleaning: =Trim, Paste Special, Values, Transpose, Find and Replace 1) Advanced Search–Topics | Geography | Years | Surveys | Codes2) Topics | Race and Ethnicity | White–Note that the “White” filter displays below3) Geography | County | Arkansas | All Counties in Arkansas–Note that the “All counties in Arkansas” filter displays4) Search!5) Select Table Named RACEAmerican Community SurveyTotal PopulationTableID: B020016) Switch to 2016: ACS 5-Year Estimates Detailed Tables7) Customize Table. Download. Make Sure to Download 2016: ACS 5-Year Estimates Detailed Tables Clean Census Data1) Create Data Dictionary2) Duplicate Sheet3) Four corners select and copy4) New Sheet. Paste Special | Transpose–the races are now the rows–Filter by Estimate: Contains Estimate, Delete5) Edit Headers: White, Black, Hispanic6) Check totals - do they add up?7) Two races including Some other race. Two races excluding Some other race, and three or more races (delete)8) Save and Load to Tableau9) Build a Arkansas Population Map by Race Build Arkansas Population Map By Race--Clean the County Field \", Arkansas\"--Create Calculations for Percentage Population by Race: Calculated Fields Income by Race https://data.census.govAdvanced SearchFilters | GeographyCounties | Arkansas | All countiesFilters | Topics | Income and PovertyFilters | Topics | Race and EthnicityFilters | Years | 2016Filters | Text Search in Find a Filter: “Income” | Select &quot;Income (Households, Families, Individuals)Search Download White Only, Black Only, Hispanic or Latino HouseholderYour tables will say this:HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2016 INFLATION-ADJUSTED DOLLARS) (WHITE ALONE HOUSEHOLDER) Survey/Program: American Community Survey Product: 2016: ACS 1-Year Estimates Detailed Tables Tables: B19001A, B19001B, B19001I Download - select .csv TableauClean Data as described in previous lessonCombine the three tables in Tableau linking to the income as a common field.Create a chart PAST TUTORIALS IN AMERICAN FACT FINDER. NEED TO REVISE https://factfinder.census.gov/faces/nav/jsf/pages/index.xhtml Household income data for counties and state and national. Gender and demographics of low-wage workersAmerican FactFinderhttps://factfinder.census.gov/faces/nav/jsf/pages/index.xhtmlAdvanced Search | Show Me AllTopics | People | PovertyGeographies | County | Arkansas | All Counties Within ArkansasSelect Table S1701, Poverty Status in the Past 12 MonthsModify Table—Select top Filter—Total and Percent Below Poverty Level—Select second Filter—Keep Estimate, do not check margin of ErrorDownload 30:00 shows how to use the fact finderhttps://www.census.gov/data/training-workshops/recorded-webinars/measuring-america.html Selected Economic Characteristics DP03 2012-2016 American Community Survey 5-Year Estimates Standard Data Cleaning Data is: ACS_16_5YR_DP03 DP03 SELECTED ECONOMIC CHARACTERISTICS 2012-2016 American Community Survey 5-Year EstimatesCopy main data sheet and call copy wages below $25kDelete all data fields except headers and these columnsHC01_VC74 Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total householdsHC01_VC75 Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – Less than $10,000 HC03_VC75 Percent; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – Less than $10,000 HC01_VC76 Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $10,000 to $14,999 HC03_VC76 Percent; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $10,000 to $14,999 HC01_VC77 Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $15,000 to $24,999 HC03_VC77 Percent; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $15,000 to $24,999 HC01_VC85 Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – Median household income (dollars)–Rotate header rows, wrap text.Shrink verbiage from Estimate; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households to “Total households”Total households %Total households Total households – &gt;$10k %Total households – &gt;$10k Total households – $10kto $14,999 %Total households – $10kto $14,999 Total households – $15,000 to $24,999 %Total households – $15,000 to \\(24,999 Median household income\\)–Specify Arkansas-stateThen find/replace to eliminate “County, Arkansas” from geography labels.Create Total Under $25 column.Add Total households – &gt;$10k + Total households – $10k to $14,999 + Total households – $15,000 to $24,999Create % Under $25k column (total Under $25k / total households)Copy formulas downCheck mathWhen satisfied, copy and paste valuesMore on Data Cleaning Census spreadsheets –Download the view and the data versions of large spreadsheets. One to guide you. the other to do the work.–Merge / unmerge cells–Find-Replace— =CONCATENATE(B3, B4). Census Demographic data Household income data for counties and state and national. Gender and demographics of low-wage workersAmerican FactFinderhttps://factfinder.census.gov/faces/nav/jsf/pages/index.xhtmlAdvanced Search | Show Me AllTopics | People | Poverty | Poverty (added to Your Selections)Geographies | County | Arkansas | All Counties Within ArkansasGeographies | United StatesGeographies | ArkansasSelect Table S1701, Poverty Status in the Past 12 MonthsModify Table—Select top Filter—Total and Percent Below Poverty Level—Select second Filter—Keep Estimate, do not check margin of ErrorDownload—Use the DataDownload Again—View the Data—Excel spreadsheetQuestions about categories and definitions:See “Table Notes” to far right on factfinder website after you’ve generated a table.https://www2.census.gov/programs-surveys/acs/tech_docs/subject_definitions/2016_ACSSubjectDefinitions.pdfRead: “Poverty Status in the Past 12 Months”“Poverty Status of Households”Definitions. working Poor–Poverty thresholds:The actual poverty thresholds vary with the makeup of the family. In 2015, the weighted average poverty threshold for a family of four was $24,257; for a family of nine or more people, the threshold was $49,177; and for one person (see Unrelated individuals), it was $12,082. Poverty thresholds are updated each year to reflect changes in the Consumer Price Index for All Urban Consumers (CPI-U). Thresholds do not vary geographically. (For more information, see “Income and poverty in the United States: 2015.”)https://www.bls.gov/opub/reports/working-poor/2015/home.htm#unrelatedindividualWeighted Average PovertyThresholds in 2015 by Size ofFamily(Dollars)One person 12,082Two people 15,391Three people 18,871Four people 24,257Five people 28,741Six people 32,542Seven people 36,998Eight people 41,029Nine people or more 49,177Source: U.S. Census Bureau.https://www.census.gov/content/dam/Census/library/publications/2016/demo/p60-256.pdfhttps://www.census.gov/data/tables/time-series/demo/income-poverty/historical-poverty-thresholds.html –Download the view and the data versions of large spreadsheets. One to guide you. the other to do the work. –Merge / unmerge cells –Find-Replace — =CONCATENATE(B3, B4). Cleaned and download 2011-2015 estimates with detailed poverty metricsArk Counties full income search 5-10-17 ACS_15_5YR_DP03 Students assigned geographical location for Census data. Questions: –Number and Percentage of Minimum Wage Households? –Compare to National, State Averages –Produce basic Tableau chart Data Cleaning and Joining Exercise --You will join the CollegeScorecard data with 2017 Census Data with the average household income The goal is to compare the average student debt in a college to the income in the surrounding town. This in-class task will stretch over two class sessions, unless you are a DATA KING OR QUEEN This exercise builds on the data analysis, cleaning and visualization skills you learned this semester. Task 1: Retrieve the Census Data Use Excel --Examine the data dictionary. --Examine the data, the range of incomes and number of cities, towns and places --Create a copy of the Census sheet for the data cleaning Task 2: Data Cleaning You will need to match the town in the Census to the city in College Scorecard. Look at the \"city\" column in the College Scorecard data: ARDebt17_10_23.csv --Tip: Data cleaning tools in Excel: Text to columns and find and replace Task 3: Joining --Join the Census data to the ARDebt17_10_23.csv in Tableau --Chart the Income and the Grad debt by the 10 largest public schools Task 4: Analysis --Construct a Ratio of Grad Debt to Per Capita Income. Map it &nbsp; "],["data-visualization.html", "Chapter 5 Data Visualization", " Chapter 5 Data Visualization Principles of Data Visualization“Our limited brains are incapable of grasping reality in all its glorious complexity.”What you design is never exactly what your audience ends up interpreting so reducing the chances for misinterpretation becomes crucial. Cleveland McGill Scale Cleveland McGill Scale for Data Visualization https://www.youtube.com/watch?v=XGPkdOczRtk&amp;feature=youtu.be Important Resources for Surveying the Data Visualization Options Dataviz Catalog http://www.datavizcatalogue.com/ FT Visual Vocabulary https://github.com/ft-interactive/chart-doctor/blob/master/visual-vocabulary/Visual-vocabulary.pdf For the weekly memo: Select two examples from the Dataviz Catalog and FT Visual Vocabulary that you find interesting or useful. Include a screenshot of the chart in your memo and describe how it could apply for our project. Graphics Comments from Jon Schleuss, Los Angeles TimesAnd the colors. What does “red” mean when it’s used? And what about using too many colors. At the Times we really only have two or three colors: basic default, a highlight color and a negative color. We break from convention, but keeping it simple helps. I figure now I’ll show them how I approach chart building from start to finish.Also, I see a desire to combine different data into the same chart. So there’s a left, bottom and right axis. But that’s a bit confusing to the reader, especially when things have the same values (percentages vs. percentages instead of percentages vs. hard counts).I think my big takeaways are that most of these charts should be flipped on their sides. That’s because when we sort data largest to smallest (nearly everyone did) we then think of it as time passing if it’s a column chart (bars situated left to right). And that there’s a downward marching trend. Best to flip a lot of these on their side. Build choropleth maps A Comment on Color Choices A reader made an excellent point that the red shading of the active cases map was misleading since ‘red zone’ is a specific concept in the White House task force reports. Our shading does not match the red zone definition of the task force report and most readers would expect that it would. I swapped out the shading for blue-green until we figure out the calculations for active cases per capita on that White House task force scale. It just goes to show you how color choices on graphics are major communication issues. Reader Comment: (???) Have you considered using a standard for which counties are red? The map gives a false impression that Arkansas counties are not “red zones” for CoVID when they are. Replying to (???) and (???)&gt; Build a Cover Image Using Canva or InDesign or Powerpoint https://www.canva.com/ Rachell Sanchez-Smith used Canva for a simple animation. Higher Resolution Graphics in Tableau https://www.dataplusscience.com/HighResolution.html Higher Resolution Photos: at least 72 DPI. Practically, should be higher. –500k or more is a safe bet –Cropping reduces file size. Grainy Guidance: https://cft.vanderbilt.edu/wp-content/uploads/sites/59/Image_resolutions.pdf Higher Resolution Graphics in Tableau https://www.dataplusscience.com/HighResolution.html "],["writing-about-data.html", "Chapter 6 Writing About Data", " Chapter 6 Writing About Data Writing Style Notes Writing style notesDon’t use this “respectively” construction. It confuses the readers and leads to data errors.Other private trade schools also made the top 10 list, such as Philander Smith in Little Rock and Bryan University in Rogers, with increases of 81 percent and 74 percent respectively. .ITT Technical Institute, the University of phoenix, Philander Smith College and Bryan University are all classified as private schools and are the top four schools with graduated student loan debt in the state. Their debt has increased 106 percent, 102 percent, 81 percent and 74 percent respectively since 2012. Common Errors – MathPercent vs Percentage PointAt Lyon College, 67 percent of non-first-generation students paid back their loans within five years, while only 53 percent of first-generation students did the same, which results in a 14 percent&nbsp;POINT&nbsp;difference. The median debt for both types of students was the same though, at $12,000.You mean “percentage point.” 14 percent of 67 is 9.4.Steve Doig –&nbsp;MathCrib-Doig AP Style with Numbers AP Numerals EntryDownload "],["excel-bootcamp.html", "Chapter 7 Excel Bootcamp", " Chapter 7 Excel Bootcamp Review four corners:1. Make a copy2. Freeze Panes3. Four corners test4. Check the mathExcel and the Black cross copy function5. Sorting6. Percentage Change:(New Number-Old Number)/Old Number *100 NICAR coursepack How to Filter in Excel Basics and Sorting in Excel Excel formulas Practice Rates and Ratios using this test data: Transit Basic Data Types: Importing Data into Excel NICAR Coursepack:&nbsp;Basics and Sorting in Excel&nbsp; Open sample dataset:&nbsp;citybudget.xls 1. Make a copy 2. Four corners test 3. Check the math 4. Sorting 5. Percentage Change Formula: (New number-Old Number)/Old Number * 100 and use % symbol Background and Help: Tutorial Video Lynda.com tutorial videos on Excel. More on Lynda.com&nbsp;&nbsp; Excel: NICAR pack—Cohen reading: Think in ratios – construct a ratio on the student loan beat. Memorize common numbers on the beat——— &nbsp; More Basic Excel Tricks How to freeze panes in Excel PIVOT TABLES Basic introduction to pivot tables Calculations and Pivot Tables COUNTIF Function for Tabulating Text https://youtu.be/5NdImlnWmsI "],["basic-tableau.html", "Chapter 8 Basic Tableau", " Chapter 8 Basic Tableau This module addresses:–Downloading instructions for Tableau–Getting started tutorial with video–Building a basic COVID data chart with video and transcript–Using filters and calculations with video and transcript–Tutorial on Tableau calculations with video–Proper formatting of a filter bar in Tableau, videoLinks to additional Tableau Tutorials Dashboards and Embedding Tableau Public in WordPress Maps in Tableau Tableau Download and License Instructions for downloading Tableau Desktop Download the latest version of Tableau Desktop and Tableau Prep Builder here Click on the link above and select “Download Tableau Desktop” and “Download Tableau Prep Builder”. On the form, enter your school email address for Business E-mail and enter the name of your school for Organization. Activate with your product key: &nbsp;TC7L-F1E2-1BB0-33F3-5B82&nbsp; The download is for your personal computer. You will need to free up hard drive space and have sufficient memory. In my experience, you need at least 15 gb free hard drive space and 4 gb ram – it will be slow but it will run with that. Already have a copy of Tableau Desktop installed? Update your license in the application: Help menu → Manage Product Keys Are your students new to Tableau? Share our free&nbsp;Data Analytics for University Students guide&nbsp;to help them get started. Students can continue using Tableau after the class is over by individually requesting their own one-year license through the&nbsp;Tableau for Students program here. Need help? Find answers to frequently asked questions&nbsp;here. Introduction to Tableau Tableau Tutorial: Do This on Your Own getting_started_transcript Video http://www.tableau.com/learn/tutorials/on-demand/getting-started Dataset for the Tutorial: global-superstore-orders-2016 Build Your First Tableau Chart - Deaths by Counties Build a basic Covid chart. Covid Data to Jan 7 1) Use the master_file_jan7.csv 2) Create a folder on your computer for the semester: Data_Spring21. Put all of your class assignments and data in that folder. Piut master_file_jan7.csv in that folder 3) Tableau: Connect | To A File | Text file | master_file_jan7.csv --this loads master_file_jan7.csv into Tableau 4) Data Interpreter (top left column, under \"Files\") 5) Check the file formats. --Are Words as ABC? &nbsp; --Are the Numbers as #? 6) New Worksheet. Click Sheet 1 (bottom left) 6) Drag County Nam to rows. 7) Drag Deaths to columns. Check that measure is SUM 8) Deaths to colors.&nbsp; &nbsp; &nbsp; --Click colors. Green-Red diverging. Reverse colors 9) Drag total deaths to labels 10) Filter for a date in time --Date to Filter. Individual date. Pick Jan. 7, 2021 --Total now should read 3,926 deaths for Arkansas_all_counties 11) Sort Descending. See toolbar, sorting icon, down arrow 12) Formatting. &nbsp; &nbsp; --Headline: Click \"Sheet 1\". Write a headline Your end product should look like the chart below: 13) Export a jpg version of your chart &nbsp; &nbsp; --Worksheet | Export | Image 14) Engage in excessive self-congratulatory behavior. This chart was filtered to show counties with deaths 25 and greater Formatting a Graphic Filters and Calculations &nbsp;Using Filters: 1) Drag County Nam to Filters, click OK 2) On the County Filter, click down arrow, show filter. It will appear on the right column as a list of county names 3) On the right column, down arrow, select Multiple Dropdown 4) Edit Title and Type some instructions to your readers: \"Select Your County 1) Select All to clear 2) Select your county\" &nbsp; Add a calculation rate: Deaths Per 10,000 1) Duplicate Sheet 1&nbsp; &nbsp; --Left Click on the tab, duplicate --This copies your whole work to a new sheet 2) Calculate a Deaths Per 10,000 &nbsp; &nbsp;--Click on Total Deaths - down arrow | Create | Calculated Field &nbsp; &nbsp;--Name the Calculation \"Deaths Per 10,000\" &nbsp; &nbsp;Divide Total Deaths into Population: &nbsp; &nbsp;--Add a Division Symbol after ([Deaths]/[Population])*10000 &nbsp; 3) Drag Deaths Per 10,000 to Columns.&nbsp; &nbsp; &nbsp;--Remove Total Deaths &nbsp; &nbsp;--Sort 4) Check your colors and labels. &nbsp; &nbsp;--Drag Deaths Per 10,000 to Colors &nbsp; &nbsp;--Drag Deaths Per 10,000 to labels &nbsp; 4) Headline, Format Legends, Export jpg Your Turn Create calculated fields and make the following charts: --Tested/population&nbsp;percentage for the most recent five days. --Active cases per 10,000 residents --A stacked bar chart with Ever on a Vent and Ever Hospitalized Post on a Google Doc, include link in your weekly memo. More on Tableau, Basic Excel Skills: FBI Data More Tableau and Excel skills training: FBI Data https://profrobwells.github.io/ArkPressWomen/FBICrime_2019.html Tableau Calculations Calculations sample workbook Calculations video Introduction to Calculations Transcript &nbsp;&nbsp;Table Calculation:&nbsp;Add a new column that adds&nbsp; &nbsp; Table Calculation:&nbsp;Add a new column divides graduate debt into enrollment –In Measures Data Tab, Left Click on GRAD_DEBT_MDN, Create Calculated Field –Put in this formula: sum[GRAD_DEBT_MDN]/[UGDS] –Rename This as: Grad Debt Per Capita Enrollment Drag INSTNM to Rows #Grad Debt Per Capita Enrollment to Columns Format with a Title, add appropriate annotations. Color the graphic, include labels. Showing Context – Total In Tableau https://onlinehelp.tableau.com/current/pro/desktop/en-us/calculations_totals_grandtotal_turnon.htm#Agg DL-by-Delinquency-Location-2gms0o8 Format Numbers in Tableau https://help.tableau.com/current/pro/desktop/en-us/formatting_specific_numbers.htm How to Tweak A Filter to Display Properly Additional Tableau Tutorials Dashboards and Embedding Tableau Public in WordPress Maps in Tableau - Dual Axis Tableau Dual Axis chart http://kb.tableau.com/articles/howto/dual-axis-bar-chart-multiple-measures https://twitter.com/ArkansasCovid/status/1354572963962626048 Use this data source https://wordpressua.uark.edu/datareporting/files/2021/02/active-cases-jan-27.xlsx Example: https://prod-useast-a.online.tableau.com/t/datareportinguofa/views/01272021datagraphic-GG_16117891922660/Sheet1?:showAppBanner=false&amp;:display_count=n&amp;:showVizHome=n&amp;:origin=viz_share_link Date to Columns Active Cases Total to Rows Confirmed Active Cases to Rows Select Confirmed Active Cases \"Green Pill\", down arrow: Dual Axis Chart Change to Lines Marks Card SUM(Active Cases) to Line (down arrow from Automatic) Change to Circles SUM(Confirmed Cases) to Line (down arrow from Automatic) Colors Marks Card SUM(Confirmed Cases) Remove Active cases from color and drag Confirmed cases to color. Change color to purple Align the Y axes: (You have to do this in Tableau Desktop) Left click, synchronize axis More documentation http://kb.tableau.com/articles/howto/dual-axis-bar-chart-multiple-measures Your Turn: Build a dual axis chart with the vaccine data: All_Doses_Received and All_Doses_Given https://github.com/Arkansascovid/Main/blob/master/vaccine.csv By Wednesday's class. MATERIAL ON THIS PAGE USES NON-COVID DATA EXAMPLES Tableau to Visualize Census Data Here’s a start: –Download and clean the data:&nbsp;US Ark Counties Poverty ACS_16_5YR_DP03_with_ann-1w6iwss We have a lot of data in this spreadsheet. Let’s simplify things. We will visualize just one column- Column J –: “Percent; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $15,000 to $24,999” –Copy the “Edited Poverty” tab and rename it Min Wage Only –Delete all of the columns except for the&nbsp;Percent; INCOME AND BENEFITS (IN 2016 INFLATION-ADJUSTED DOLLARS) – Total households – $15,000 to $24,999″ –Fix the column headings so it plays nice with Tableau. Delete the Row 1 “GEO.display-label…” –Simplify your new column B:&nbsp;% Households – $15k-$25k –Save, backup etc and open Tableau. –Import&nbsp; your data –Open new tab –Geography to Columns. % Households $15k- $25k to rows –Sort by largest-smallest –Filter by Geography – drag Geography to Filter. Filter to keep the following: Arkansas,&nbsp; Benton,Carroll, Crawford, Madison, Sebastian, United States, Washington Formatting. This is the standard formatting you will apply to all of your charts in some fashion. We are simplifying and clearly marking the labels –Drag to Label in Marks box:&nbsp;% Households $15k- $25k to rows –Format Label to % – Format | Pane | Default | Numbers | Numbers: Custom | 1 decimal. % as suffix. –Format Y Axis to %. – Format | Axis | Scale | Numbers | Number: Custom | no decimal, % as suffix. –Color the bars. Drag to colors in Marks box:&nbsp;% Households $15k- $25k to rows. Edit colors to blue – red scale, reverse colors so red = highest. –Label graph: Double Click on “Sheet 1” above the chart. Text box emerges with&nbsp; &lt;Sheet Name&gt; Type in name of chart:&nbsp;Minimum Wage Households&nbsp;Percentage of Households Earning $15,000-$24,999 in 2016&nbsp;Source: U.S. Census –Fix X axis labels (squished) . Drag the right chart out to expand the visualization. Export image –Worksheet | Export | Image –Click off color legend option –Title Minimum Wage Arkasas. Save as .jpeg Histogram This is a detailed walk-through of how to add a cumulative distribution to a histogram in Tableau. Build a histogram with % Female Households in PovertyEasiest method: click on% Female Households in Poverty and choose the histogram from Show MeFind out where this is happening: drag Geography to the pane. Now hover your mouse over the blocks and you will see the counties. Duplicate the CNT(Profit) pill on Rows by Ctrl+drag the pill next to itself on the Rows shelfThis gives you a new marks card – now you can create 2 different types of mark for a single data field. On the new marks card “CNT(Profit)(2)”, change the mark type to a lineChange the color as well, if desiredRight click on the duplicated field on the Rows shelf and make it a dual axisApply a Quick Table Calculation of Running Total to the duplicated field[[If students find this histogram to be uninteresting, add a filter on Profit to ignore outliers (maybe go from -500 to +500). Then right-click Profit(bin) dimension and Edit to make the bin size smaller, maybe 25.]]Create a Reference Line for PovertyStep 1 – Build the ViewDrag % Female Households – Children 5 Years to the Rows shelf.Drag Geography to the Columns shelf.Step 2 – Create ParametersRight-click in the Data pane and then select Create Parameter.Name the parameter “Arkansas Average”.Under Data Type select Integer.Under Current Value, set to 55.8Under Allowable values select All.Click OK.Step 3: Create the calculated fieldSelect Analysis &gt; Create Calculated Field.Name the calculated field “Reference Line”.In the formula field, enter the following formula:IF[% Female Households – Children 5 years younger]=[Arkansas Average] THEN [Arkansas Average] ENDClick OK.Step 4 – Use the calculated field as a Parameter ControlDrag the “Reference Line “calculated field to Details. This is the box below Color in the Marks CardClick the arrow to change the measure from SUM to Minimum.In the view, right-click on the Y axis and select Add Reference Line.In the Value drop down menu, select Minimum(Reference Line).In the Label drop-down menu, select Value.Click OK.Visualize the income distribution in a histogram% of Female Households – Children 5 Years and Younger.–Drag to Columns–Show me: Select Histogram–Distribution of the poverty level. Bins and GroupsCreate Bins: https://onlinehelp.tableau.com/current/pro/desktop/en-us/calculations_bins.htmOther options besides bins: Use parameters to organize data: ;https://onlinehelp.tableau.com/current/pro/desktop/en-us/parameters_create.htm Use sets to organize data: ;https://onlinehelp.tableau.com/current/pro/desktop/en-us/sortgroup_sets_create.htm#UseCreate Bins: https://onlinehelp.tableau.com/current/pro/desktop/en-us/calculations_bins.htmFormat Filters – See video belowUse parameters to organize data: https://onlinehelp.tableau.com/current/pro/desktop/en-us/parameters_create.htmUse sets to organize data: https://onlinehelp.tableau.com/current/pro/desktop/en-us/sortgroup_sets_create.htm#Use ##Need to Edit below, may duplicate the earlier section Track #1: Tableau Arkansascovid.com Data Arkansascovid.com data Copy of the full spreadsheet, to Aug 24 https://docs.google.com/spreadsheets/d/1g-gkjJOr1sKAu6rZHG04XA5_fM_Ma0jLr5r24fwMqiA/edit?usp=sharing Use this version for the Tableau exercises https://github.com/profrobwells/CovidFall2020/blob/master/Data/Date_Master_Copy_Basic_Aug_25.xlsx?raw=true Key Points * Import data. Headers have to be right * Strings and types in the data view Build a basic Covid chart. **Tableau: Arkansas Covid Data** Covid Data to Aug 24 1) Use the Date_Master_Copy_Basic_Aug_25.xlsx spreadsheet into Tableau. Import to Tableau 2) Drag \"BeAll\" tab to top window: \"Drag tables here\" 3) Data Interpreter (top left column, under \"Sheets\") 4) Are Words as ABC? Are Numbers as #?&nbsp; --Change New Cases Today to #. Same for Active Cases 5) New Worksheet. Click Sheet 1 (bottom left) 6) County1 to rows. 7) Total deaths to columns. Check that measure is SUM 8) Total deaths to colors.&nbsp; &nbsp; &nbsp; --Click colors. Green-Red diverging. Reverse colors 9) Add total deaths to labels 10) Filter for a date in time --Date to Filter. Individual date. Pick Aug. 24, 2020 --Total now should read 696 deaths in Arkansas 11) Formatting. &nbsp; &nbsp; --Headline: Click \"Sheet 1\" 12) Sort ascending (Toolbar sorting. Also under headline) &nbsp; &nbsp;--This chart is ridiculously long! Your end product should look like this: "],["flourish.html", "Chapter 9 Flourish", " Chapter 9 Flourish Flourish Videos to Get Started: Alberto Cairo and Flourish - Overview https://www.youtube.com/watch?v=cN1Q9MusZbc Overview https://www.youtube.com/watch?v=fKO_jjqgooc&amp;feature=emb_title Ravi Brock and Flourish in 9 mins https://video.uark.edu/media/Flourish+tutorial+with+Ravi+Brock/1_g6nzw3h0 Cairo - Flourish - Stories https://www.youtube.com/watch?v=P7AmUdSBOVU Alberto Cairo, Flourish Tutorials, Parts 1-6 https://www.youtube.com/user/albertocairo1706/videos Beginning Documents Basic Tips: --It's all about the templates. Select the one that best matches your idea --Do your math, sorting, formatting in Excel before uploading to Flourish. Easier --There are hidden menus and functions in the data section. A bit frustrating but you will figure it out. Intro https://help.flourish.studio/article/9-creating-a-visualization Stories in Flourish https://www.youtube.com/watch?v=9HTZUXNOLVQ&amp;feature=emb_rel_end Importing Data https://www.youtube.com/watch?v=Rscfi7QZVvs&amp;feature=emb_rel_end&nbsp;https://help.flourish.studio/article/12-adding-data-to-a-template Flourish Design Tips --Labels: be judicious with text labels. --Annotations. Within Flourish story: Once you're finished creating your visualization, click on the \"Create story\" button in the top right corner. This will take you through to a new Flourish story with your visualization as the first slide. https://help.flourish.studio/article/89-how-to-create-a-single-slide-story-in-flourish too many numbers on the labels, so think of using annotations to fix that issue. https://help.flourish.studio/article/180-how-to-add-annotations-to-your-visualization#:~:text=Inside%20the%20story%20editor%2C%20you,an%20annotation%20will%20be%20added. --Colors: https://help.flourish.studio/article/91-how-to-customize-colors#:~:text=The%20main%20color%20tool%20in,delete%20and%20add%20new%20colors. --Sorting: have the chart tell a story - sorting. --X axis labels. rotate the x axis labels, drop the font a bit and get more of the counties represented. bump up the fonts on the x axis. rather faint. --Delete rows \"missing county info\" --Labels: \"become the boss of this data.\" we take control of these ridiculous labels. what is \"administrative support and waste management and remediation services\" - what does that mean? --Style: your credit at the bottom in the footer Work with this version: https://app.flourish.studio/story/775979/edit More Resources Bar chart race template https://towardsdatascience.com/step-by-step-tutorial-create-a-bar-chart-race-animation-da7d5fcd7079 https://help.flourish.studio/article/63-how-to-change-label-positioning Misc Google sheets&nbsp;https://help.flourish.studio/article/165-how-to-pull-through-data-from-a-google-sheet Basic Help page https://help.flourish.studio/ Content to popups https://help.flourish.studio/article/69-how-to-add-custom-content-to-your-popups Overview https://flourish.studio/2019/12/19/2019-year-in-review/ Spanish&nbsp;https://flourish.studio/2019/10/23/informar-elecciones-con-flourish/ Different accounts&nbsp;https://help.flourish.studio/article/16-controling-access-to-visualizations-and-stories Sorting data&nbsp;https://help.flourish.studio/article/36-how-to-display-your-data-in-a-different-order Adam Marton Cheat Sheet Flourish.studio Examples: https://flourish.studio/examples/&nbsp; *** Graphic stories and animated stories See the slider at the top of this page for examples of graphic stories and animation Bar chart race Animated dot animation Animated charts Story maps Animated maps Templates from Flourish Team: (more examples) https://app.flourish.studio/@flourish&nbsp; Interesting examples: Time map - map with time slider Twitter timelines - good for events Election results chart Icon map Photo slider Sankey - 2 Table Parliament “C” chart - useful for showing votes on an issue, more Sports - player positions on a field Chord diagram- visualize connections between entities Survey / Dot viz (good for exploring survey results and more) Arc map - display connections between points on a map Cards - 2 - blocks in a grid (candidates, much more) Quiz Bar race / Line race Point map - 2 - visualize large data sets on a map, animate around it Animated scatterplot Elections | Elections 2 Background: Flourish newsrooms plan Private projects, HTML export and much more! Get started here In case your account has administrative privileges for your newsroom, you will be able to invite more users to your newsroom. You can find more information on how to do that and how to administer your newsroom here. Our extensive help docs are carefully crafted to help you overcome the occasional issue you may run into, and also show you how to create cool things. You can find them here. Keep track of how Flourish is constantly improving and new features are being added through our new changelog. If you want to see what we did – and what users like you made – in 2019, take a look at our Year in Review blog post! As an extra, for our Spanish-speaking users, we've also recently published our popular elections blog post – in Spanish! Check it out here! Flourish - Stories https://www.youtube.com/watch?v=P7AmUdSBOVU Intro https://help.flourish.studio/article/9-creating-a-visualization How to Create a Flourish Chart https://www.youtube.com/watch?v=fKO_jjqgooc&amp;feature=emb_title Bar chart race template https://towardsdatascience.com/step-by-step-tutorial-create-a-bar-chart-race-animation-da7d5fcd7079 https://help.flourish.studio/article/63-how-to-change-label-positioning Survey template- break out to different groups, histogram or a map Tables with sparklines Mobile settings Part 5 Scatter plot and animation https://www.youtube.com/watch?v=XehZFhNt8mw Part 6: https://www.youtube.com/user/albertocairo1706/videos Examples from Fall Class Flourish So Far Abby: https://public.flourish.studio/visualisation/3936735/ https://public.flourish.studio/visualisation/3941284/ Kendal: https://app.flourish.studio/visualisation/3923703/ Part 3 Basic world Map https://www.youtube.com/watch?v=AfoGkoqmvqY Create an Active&nbsp;and New Cases&nbsp;Map:&nbsp; https://app.flourish.studio/visualisation/3967148/edit&nbsp; Click data. On the Regions layer,&nbsp;upload “arkansascounties.json” which is found in Teams files&nbsp;or on&nbsp;Github:&nbsp;https://raw.githubusercontent.com/Arkansascovid/Main/master/arkansascounties.json&nbsp; Click the arrow button next to “Upload data” and select “Upload data and merge”,&nbsp;then upload countyonlytoday.csv and merge&nbsp;on “NAME” and “County_Name”, 76 rows should be imported&nbsp; Geometry should be column A.&nbsp;Name should be column G.&nbsp;Select&nbsp;Active_cases, Active_cases_10k_pop,&nbsp;Confirmed_active,&nbsp;Probable_active,&nbsp;New_cases_today, New_cases_today_10k_pop,&nbsp;Pct_pos_new_to_dashboard&nbsp;(columns&nbsp;U,AV,AE-AF,AO,AU,AX)&nbsp;for the values.&nbsp; Make sure no counties are missing/greyed out on map&nbsp; In top right corner, select Export &amp; Publish&nbsp; Flourish Links https://app.flourish.studio/projects https://www.youtube.com/watch?v=9HTZUXNOLVQ&amp;feature=emb_rel_end https://help.flourish.studio/article/16-controling-access-to-visualizations-and-stories https://help.flourish.studio/ https://flourish.studio/whats-new/ https://flourish.studio/2019/12/19/2019-year-in-review/ https://flourish.studio/2019/10/23/informar-elecciones-con-flourish/ https://help.flourish.studio/article/16-controling-access-to-visualizations-and-stories https://help.flourish.studio/category/42-line-bar-and-pie-charts/2?sort=updatedAt https://help.flourish.studio/article/107-how-to-create-a-scatter-plot-with-a-filter https://help.flourish.studio/category/10-flourish-basics https://app.flourish.studio/visualisation/4080552/edit https://public.flourish.studio/visualisation/4080552/ "],["wordpress.html", "Chapter 10 WordPress", " Chapter 10 WordPress Using WordPress --Author powers&nbsp; --To access back end of datareporting:&nbsp; https://wordpressua.uark.edu/datareporting/wp-admin Login with UARK credentials. Quick tips on Gutenberg editor https://wordpressua.uark.edu/datareporting/wordpress/ Blocks Verse Paragraph Image Custom HTML Code Embed Flourish in WordPress Under Published in Flourish, find embed code. Create a post. Create a block - custom html. Paste code there. Save and update Looks like this: Embed Tableau in WordPress Using Tableau Public to Host Graphics --Create Tableau Public account if you haven't already --Load your student loan graphic to Tableau Public. –Post on WordPress. Create a new post Use Divi Builder, the Purple box above the formatting bar Insert columns, pick a full row Insert module, pick &lt;/&gt; Code Paste your Tableau Public embed code in the Content box Scroll down, change the Admin Label to&nbsp;My Mind-Blowing Tableau Graphic&nbsp;(or something more humble). Save and Exit Change Page Layout (upper right corner) to Fullwidth. Publish Revel in your nerd powers Building the Web PageGutenberg has blocks to display text, graphics, video etc.Everyone has to build their own page in DataReporting site of WordPress.Tasks:Create a Post.Upload your graphic from Assignment #1 and your story. Format so it doesn’t look uglyClick “Student Work” for category. "],["datawrapper.html", "Chapter 11 Datawrapper", " Chapter 11 Datawrapper Datawrapper is one of the best tools if you have no experience. It's easy to learn but can produce attractive charts. It offers a free plan, but you have to pay for more customized charts. First Datawrapper Chart https://academy.datawrapper.de/category/141-general DataWrapper Tutorials Get inspired: DataWrapper chart gallery School of Data: DataWrapper tutorial Adam Marton Datawrapper Training https://www.youtube.com/watch?v=bmGgzBKcK_M&amp;t=3132s&amp;ab_channel=AdamRobertMarton Automatic chart updates: How to publish charts with external data sources https://academy.datawrapper.de/article/60-external-data-sources Adam: Datawrapper has good instructions on how to upload your own map here: https://academy.datawrapper.de/article/145-how-to-upload-your-own-map The general process, or at least the workflow I use, is: 1. Compress your shapefile into a zip archive. 2. Go to mapshaper.org and import your zip archive. 3. Your map needs to use the WGS-84 projection or Datawrapper won't accept it. To put the map in that projection, hit the spacebar in mapshaper to enter the console, and enter proj wgs84 4. If you want to use labels for your map's polygons, you'll need to set interior points. In the console, enter each \"cx=$.innerX, cy=$.innerY\" 5. You can also simplify the precision of the polygons on your map (hello, Chesapeake Bay) to drive down the file size of the map you're about to export. Hit the simplify button at the upper right, check the box for prevent shape removal, hit apply, and drag the slider to the right. I usually simplify down to around 50% and the map looks pretty unaffected. Your results may vary. 6. Hit the export button and choose TopoJSON as the file format. 7. Back in Datawrapper, start a new map project, click the or Upload Map button, and upload your TopoJSON file. From here, the process to finish your map is identical to creating any other Datawrapper map. To go even further with a custom map, you can upload a TopoJSON that has a polygon layer for places like precincts and municipalities, and an outer boundary line layer for things like county or state boundaries. For instance, this election map has 240 municipalities in the much-discussed Philadelphia suburbs, as well as 60-plus wards for the city of Philadelphia. It also needed to have thicker lines to show county boundaries as a reference point for readers, or else all the polygons would be one large blob. Here's an example using another election map: https://www.inquirer.com/politics/election/philadelphia-presidential-votes-suburban-county-ward-map-20201109.html You start by uploading a multi-layer TopoJSON. To do that, import a polygon shapefile and a line shapefile into mapshaper.org. Make sure you apply the correct projection and set the interior points for both layers. After you export as a TopoJSON and bring it into Datawrapper, hit the toggle switch for Additional options (advanced). \"Regions\" are your polygons and choose \"Outer borders\" to set the thick boundary lines. Anyway, that's a new Datawrapper trick that I just picked up for our election maps. John "],["r-introduction.html", "Chapter 12 R Introduction", " Chapter 12 R Introduction R and R Studio Install R and R Studio. This is free and open source software. It is not large and doesn't tax the memory a lot. R runs on Windows, Mac and Linux, but this course is designed for the Mac version. If you use Windows, there may be variations in the lessons and instructions. Please see me for questions. Installing R is a two-step process: 1) Install R, the actual program 2) Install RStudio, a common interface 1) Download the most recent version of R for Mac: https://mirrors.nics.utk.edu/cran/bin/macosx/R-4.0.2.pkg --If you have a Windows computer, go to: https://mirrors.nics.utk.edu/cran/bin/windows/base/R-4.0.2-win.exe Accept all of the default settings for Mac. 2) Install RStudio, the interface we use to manage and create R code. Download the open source edition of R Studio desktop and follow the prompts to install it. https://rstudio.com/products/rstudio/download/#download Good instructions for installing R http://www.machlis.com/R4Journalists/download-r-and-rstudio.html Good overview of the program https://docs.google.com/presentation/d/1O0eFLypJLP-PAC63Ghq2QURAnhFo6Dxc7nGt4y_l90s/edit#slide=id.p Start Here Basic tutorial on R: https://profrobwells.github.io/Guest_Lectures/Intro_To_R/R1_Intro-to-R.html Download the code and try it yourself (Left click, download, remove.txt extension) https://github.com/profrobwells/CovidFall2020/raw/master/Exercises/R1_Intro%20to%20R.Rmd Reading Machlis, Sharon. Practical R for Mass Communications and Journalism. Chapman &amp; Hall/CRC The R Series. 2018. ISBN 9781138726918 https://www.amazon.com/gp/search?keywords=9781138726918 Ch. 1, Introduction Ch. 3, See How Much You Can Do in a Few Lines of Code Chapter 2: Get Started With R in a Few Easy Steps Here is the link to the firts six chapters for free http://www.machlis.com/PracticalR4Journalism/index.html Advanced Corner --Import Arkansascovid.com data and summarize Washington County trends The master file Ch 1 &amp; 2 of Machlis: Key Points Reproducible research Repetitive tasks in modern newsrooms. Employment reports, crime stats, budgets Variables - an R object Assignment operator &lt;- Case sensitive Vector: A vector can only have one type of data - all integers, all strings Dataframe - like a spreadsheet Save files - Don’t save workspace: because all of your variables will be stored and re-loaded the next time you launch RStudio. It’s too easy to forget about previously stored variables that can interfere with later work, Software packages: tidyverse, rio, pacman Data Types and R Machlis: 2.4.2 Data types you’re likely to use often Reference: Logical Operators in R Beginner’s guide to R: Introduction https://www.computerworld.com/article/2497143/business-intelligence/business-intelligence-beginner-s-guide-to-r-introduction.html RStudio IDE Easy Tricks You Might’ve Missed https://rviews.rstudio.com/2016/11/11/easy-tricks-you-mightve-missed/ How Do I? https://smach.github.io/R4JournalismBook/HowDoI.html Packages https://smach.github.io/R4JournalismBook/packages.html Download R and RStudio http://www.machlis.com/R4Journalists/download-r-and-rstudio.html You can download the most recent version of R at https://www.r-project.org/, which is the home of R (formally known as the R Project for Statistical Computing). The R-project home page usually includes information about the latest versions of R. Don’t be put off by the sometimes odd nicknames for R versions, such as “Very, Very Secure Dishes” and “Bug in Your Hair” – the software is much more useful than you might assume from the nicknames. (The whimsical version names come from various Peanuts cartoons.) There should also be a prominent link to download R. Click that download option and you should be taken to CRAN, the Comprehensive R Archive Network, and a list of CRAN servers, called mirrors, around the world. Pick a server and choose the precompiled binary distribution for your operating system. Once the file finishes downloading, install it like any other software program - run the .exe for Windows or .pkg for Mac. You should be fine accepting all the Mac defaults. On Windows, you’ll need to decide whether you want the 32- or 64-bit R version. (Unless you’ve got a pretty old system, chances are you’ll want 64-bit.) This is all you need to start running R, but I strongly recommend also installing RStudio, a free platform designed to make it easier and more enjoyable to create and run R code. Head to RStudio.com and under products, look for RStudio and then RStudio Desktop (not Server), and download the free Open Source Edition version for your operating system. This, too, installs like a typical software program Important Reference MaterialsData Structures in R-1wd5uemData Importing-t7pkq5Importing CSVs-1w8mk8dggplot2-cheatsheet-19yp3zd R NOTES THAT NEED TO BE CLEANED UP Class AssignmentRead this R Script and follow along with the video lectureBasic Pct Chart in R&nbsp;Task 1: Create an R script with the commands used to build these charts, including&nbsp;loading of libraries, setting working directory, loading files&nbsp;Task 2: Create a chart illustrating the percentage change for the top 10 schools, 2012-2016.&nbsp;Export a .png file&nbsp;Task 3: Create a chart illustrating the percentage change for the bottom 10 schools, 2012-2016&nbsp;Do not chart Null Values! Your chart must have data for 10 schools&nbsp;Export a .png file&nbsp;Task 4: Upload the two charts in .png files and the R script to WordPress&nbsp;by Thursday, 11:59 p.m. 30 points Exercises Using R to Shorten, Simplify the Master File https://github.com/profrobwells/CovidFall2020/blob/master/Exercises/Slicing-Dicing%20Data%2010-14-2020.Rmd Resources **Dplyr Presentation* Five basic verbs filter() select() arrange() mutate() summarize() plus group_by() Due Friday Flourish Workbook Updates Reading Machlis: Ch. 8 Analyze data by groups Transforming and Analyzing Data dplyr.pdf, Andrew Ba Tran, Washington Post: https://github.com/profrobwells/CovidFall2020/blob/master/Reading/Transforming%20and%20Analyzing%20Data%20dplyr.pdf http://learn.r-journalism.com/en/wrangling/dplyr/dplyr/ Weekend Memo 250 Words with Sources: Story Pitch #2 Assignment 2. Story with Interactive Graphic. Due Oct 21 Students will gather, analyze and visualize Arkansascovid data, primarily with R Studio. Students will produce publication-ready graphics in Flourish from data. Stories will be footnoted and ready for fact checking. R script due with story. Write the story Google Doc, Not Word. Make sure sharing is enabled. Week #9: Slicing, Dicing with Dplyr Monday Oct. 19 Stories Due Saturday, Oct 24 Schedule Demographic data Flourish R exercises R Exercises Due Wednesday Schedule https://docs.google.com/spreadsheets/d/1gvm3BuS83NRbsx0pS_PuYTFytN4sPS3B9Xhq-6gnu6c/edit#gid=0 Abby training on Data Update –Exercises Using R to Shorten, Simplify the Master File https://github.com/profrobwells/CovidFall2020/blob/master/Exercises/Slicing-Dicing%20Data%2010-14-2020.Rmd You are in Dplyr bootcamp! DPLYR BOOT CAMP 5th Lesson 8-21-2020.Rmd Make a Dplyr Cheat Sheet Read Before Next Class Joining Dataframes in R https://www.youtube.com/watch?v=gLg4D9bMIyc&amp;t=13s Ch. 7 Two or more data sets Data Wrangling http://learn.r-journalism.com/en/wrangling/ Joins in R: https://bit.ly/2OFnGJ6 Wednesday, Oct. 21 R and Flourish Agenda White House Report Stories Due Saturday, Oct 24 R Tables Flourish –Exercises Using R for Math https://github.com/profrobwells/CovidFall2020/blob/master/Exercises/Slicing-Dicing%20Data%2010-14-2020.Rmd Today’s set of tasks: March 29 class-2lrqupg Data US Ark Counties Poverty ACS_16_5YR_DP03-Jan 24-y46vv7 Race Poverty Set ACS_16_5YR_S1701_with_ann-28nvp6q File Header Definitions ACS_16_5YR_S1701_metadata-1on99rr R4JournalismBook https://github.com/smach/R4JournalismBook https://smach.github.io/R4JournalismBook/booklinks.html Functions https://smach.github.io/R4JournalismBook/functions.html Here is the answer to the GGPLOT Exercise Basic Pct KEY Chart in R-2ndxc07Several of you used incorrect data from 2016 and came out with this ranking: ITT Technical Institute-Little Rock Philander Smith College Bryan University College of the Ouachitas Arkansas State University-Main Campus Arkansas State University-Mountain Home Arkansas Tech University Central Baptist College South Arkansas Community College Searcy Beauty College &nbsp; But using the latest 2016 data from CollegeScorecard arrives at this ranking: ITT Technical Institute-Little Rock College of the Ouachitas Bryan University Arkansas State University-Main Campus Arkansas State University-Mountain Home Philander Smith College Arkansas Tech University Searcy Beauty College Central Baptist College Arthur's Beauty College Inc-Fort Smith &nbsp; &nbsp; See the data Top 10 Using Old College Scorecard Data-2iw2xe1 [et_pb_section bb_built=“1”][et_pb_row][et_pb_column type=“4_4”][et_pb_text admin_label=“Key Resources for R” _builder_version=“3.17.2”] You will be using these materials a lot during the course of the semester. Machlis, Sharon. Practical R for Mass Communication and Journalism. Chapman &amp; Hall/CRC, 2018. http://www.machlis.com/R4Journalists/. RStudio IDE Easy Tricks You Might’ve Missed https://rviews.rstudio.com/2016/11/11/easy-tricks-you-mightve-missed/ How Do I? https://smach.github.io/R4JournalismBook/HowDoI.html Functions: https://smach.github.io/R4JournalismBook/functions.html Packages: https://smach.github.io/R4JournalismBook/packages.html [/et_pb_text][/et_pb_column][/et_pb_row][/et_pb_section] R and R Studio Install R and R Studio. This is free and open source software. It is not large and doesn&#39;t tax the memory a lot. R runs on Windows, Mac and Linux, but this course is designed for the Mac version. If you use Windows, there may be variations in the lessons and instructions. Please see me for questions. Installing R is a two-step process: 1) Install R, the actual program 2) Install RStudio, a common interface 1) Download the most recent version of R for Mac: https://mirrors.nics.utk.edu/cran/bin/macosx/R-4.0.2.pkg --If you have a Windows computer, go to: https://mirrors.nics.utk.edu/cran/bin/windows/base/R-4.0.2-win.exe Accept all of the default settings for Mac. 2) Install RStudio, the interface we use to manage and create R code. Download the open source edition of R Studio desktop and follow the prompts to install it. https://rstudio.com/products/rstudio/download/#download Good instructions for installing R http://www.machlis.com/R4Journalists/download-r-and-rstudio.html Good overview of the program https://docs.google.com/presentation/d/1O0eFLypJLP-PAC63Ghq2QURAnhFo6Dxc7nGt4y_l90s/edit#slide=id.p "],["r-data-viz.html", "Chapter 13 R Data Viz", " Chapter 13 R Data Viz "],["part-6-chart-by-gender.html", "Chapter 14 Part 6: Chart By Gender", " Chapter 14 Part 6: Chart By Gender MediaBucks &lt;- rio::import(&quot;https://github.com/profrobwells/Guest_Lectures/blob/master/Intro_To_R/RealMediaSalariesCleaned.xlsx?raw=true&quot;, which = &quot;RealMediaSalaries2&quot;) MediaBucks %&gt;% ggplot(aes(y = Salary, x=Gender)) + geom_bar(stat = &quot;identity&quot;) + labs(title = &quot;Total Media Salaries by Gender&quot;, subtitle = &quot;Source: RealMediaSalaries survey, 2019 &quot;, caption = &quot;Graphic by Rob Wells&quot;, x=&quot;County&quot;, y=&quot;Salary&quot;) ## Warning: Removed 4 rows containing missing values (position_stack). This needs some work Get rid of scientific notation options(&quot;scipen&quot;=100, &quot;digits&quot;=4) MediaBucks %&gt;% ggplot(aes(y = Salary, x=Gender)) + geom_bar(stat = &quot;identity&quot;) + scale_y_continuous(labels = scales::dollar) + labs(title = &quot;Total Media Salaries by Gender&quot;, subtitle = &quot;Source: RealMediaSalaries survey, 2019 &quot;, caption = &quot;Graphic by Rob Wells&quot;, x=&quot;County&quot;, y=&quot;Salary&quot;) ## Warning: Removed 4 rows containing missing values (position_stack). Add Color MediaBucks %&gt;% ggplot(aes(y = Salary, x=Gender, color = Gender)) + geom_bar(stat = &quot;identity&quot;) + theme(legend.position = &quot;none&quot;) + #coord_flip() + #this makes it a horizontal bar chart instead of vertical scale_y_continuous(labels = scales::dollar) + labs(title = &quot;Total Media Salaries by Gender&quot;, subtitle = &quot;Source: RealMediaSalaries survey, 2019 &quot;, caption = &quot;Graphic by Rob Wells&quot;, x=&quot;County&quot;, y=&quot;Salary&quot;) ## Warning: Removed 4 rows containing missing values (position_stack). Average salaries is the story! MediaBucks %&gt;% select(Gender, Salary) %&gt;% group_by(Gender) %&gt;% summarize(mean = mean(Salary, na.rm=TRUE)) %&gt;% ggplot(aes(y = mean, x=Gender, color = Gender, fill=Gender)) + geom_bar(stat = &quot;identity&quot;) + theme(legend.position = &quot;none&quot;) + scale_y_continuous(labels = scales::dollar) + labs(title = &quot;Average Media Salaries by Gender&quot;, subtitle = &quot;Source: RealMediaSalaries survey, 2019 &quot;, caption = &quot;Graphic by Rob Wells&quot;, x=&quot;County&quot;, y=&quot;Salary&quot;) Export: Lower right, Export as .png file #Machlis - Basic Data Visualization #Wickham - MPG charts #Updated Feb 4 2019 #load software - Select NO when asked to restart install.packages(“ggplot2”) install.packages(“dplyr”) install.packages(“usethis”) install.packages(“forcats”) #call software into memory library(ggplot2) library(dplyr) library(usethis) library(forcats) #Basic demo #You will run the commands from the Console below demo(topic=“graphics”) library(dplyr) #Tutorial #Import Data, Create Dataframe, Rename Columns snowdata &lt;- rio::import(“data/BostonChicagoNYCSnowfalls.csv”) bostonsnow &lt;- select(snowdata, Winter, Boston) names(bostonsnow)[2] &lt;- “TotalSnow” #Doing the same thing but with pipe function bostonsnow2 &lt;- select(snowdata, Winter, Boston) %&gt;% rename(TotalSnow = Boston) #Doing the same thing but more efficiently bostonsnow3 &lt;- select(snowdata, Winter, TotalSnow = Boston) #Basic graphs plot(bostonsnow$TotalSnow) hist(bostonsnow\\(TotalSnow) boxplot(bostonsnow\\)TotalSnow) barplot(bostonsnow\\(TotalSnow) barplot(sort(bostonsnow\\)TotalSnow, decreasing = TRUE)) #qplot qplot(data=bostonsnow, y = TotalSnow) qplot(y = bostonsnow$TotalSnow) #basic ggplot2 - boxplot ggplot(data=snowdata) + geom_boxplot(aes(x = “Boston”, y = Boston)) #dual box plots ggplot(data=snowdata) + geom_boxplot(aes(x = “Boston”, y = Boston)) + geom_boxplot(aes(x = “Chicago”, y = Chicago)) #bring in snowdata tidy snowdata_tidy &lt;- rio::import(“data/snowdata_tidy.csv”) #view a tidy table View(snowdata_tidy) #Boxplot with ggplot ggplot(snowdata_tidy, aes(x = City, y = TotalSnow)) + geom_boxplot() #Line graphs ggplot(snowdata_tidy, aes(x = Winter, y = TotalSnow, group = City)) + geom_line() #ggplot with colors and points ggplot(snowdata_tidy, aes(x = Winter, y = TotalSnow, group = City, color = City)) + geom_line() #ggplot with colors and points ggplot(snowdata_tidy, aes(x = Winter, y = TotalSnow, group = City, color = City)) + geom_line() + geom_point() #Filtered for two years, 1999 and 2000 snowdata_tidy21 &lt;- filter(snowdata_tidy, Winter &gt;= “1999-2000”) ggplot(snowdata_tidy21, aes(x = Winter, y = TotalSnow, group = City, color = City)) + geom_line() + geom_point() #Barplots ggplot(data = snowdata_tidy21, aes(x = Winter, y = TotalSnow, group = City, color = City)) + geom_col() #Not so ugly bars ggplot(data = snowdata_tidy21, aes(x = Winter, y = TotalSnow, group = City, fill = City)) + geom_col(position = “dodge”) #——————————————————————-# #Build a chart - Snow #——————————————————————-# library(ggplot2) SnowChartBoston &lt;- ggplot(bostonsnow, aes(x = reorder(Winter, TotalSnow), y = TotalSnow)) + geom_bar(stat = “identity”) + coord_flip() + labs(title = “Snow”, subtitle = “lots of it”, caption = “Graphic by Rob Wells”, x=“Years”, y=“snow in inches”) plot(SnowChartBoston) #Notes from R for Data Scientists - Wickham #https://r4ds.had.co.nz/ #Feb. 2 2019 install.packages(‘tidyverse’) install.packages(c(“nycflights13”, “gapminder”, “Lahman”)) #If we want to make it clear what package an object comes from, we’ll use the package name followed by two colons, like dplyr::mutate(), or #nycflights13::flights. This is also valid R code. library(tidyverse) #Do cars with big engines use more fuel than cars with small engines? #displ, a car’s engine size, in litres. #hwy, a car’s fuel efficiency on the highway, in miles per gallon (mpg). #A car with a low fuel efficiency consumes more fuel than a car with a high fuel efficiency when they travel the same distance. #To learn more about mpg, open its help page by running ?mpg. mpg mpg &lt;- as_data_frame(mpg) View(mpg) ncol(mpg) #Create a ggplot ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) #3.2.3 A graphing template #Let’s turn this code into a reusable template for making graphs with ggplot2. #To make a graph, replace the bracketed sections in the code below with a dataset, a geom function, or a collection of mappings. #ggplot(data = ) + # (mapping = aes()) ggplot(data = mpg) #using color to distinguish class ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = manufacturer, size=hwy)) str(mpg) #MPG categorical = manufacturer model cyl trans drv fl class #continuous = disply cty hwy #Map a continuous variable to color, size, and shape. #How do these aesthetics behave differently for categorical vs. continuous variables? #Answer - they do not come up in discrete blocks by on a spectrum range #Color by manufacturer ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color =manufacturer)) #Color and Size ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color =manufacturer, size=manufacturer)) #adding size ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, size = class, color = class)) #What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point) ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = hwy)) #What happens if you map an aesthetic to something other than a variable name, #like aes(colour = displ &lt; 5)? Note, you’ll also need to specify x and y. ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = displ &lt; 3)) #It gives you a true false by color #Map two variables #Example #https://stackoverflow.com/questions/3777174/plotting-two-variables-as-lines-using-ggplot2-on-the-same-graph "],["section.html", "Chapter 15 15.1 # R Data Cleaning", " Chapter 15 test_data &lt;- data.frame( var0 = 100 + c(0, cumsum(runif(49, -20, 20))), var1 = 150 + c(0, cumsum(runif(49, -10, 10))), date = seq(as.Date(“2002-01-01”), by=“1 month”, length.out=100) ) ggplot(test_data, aes(date)) + geom_line(aes(y = var0, colour = “var0”)) + geom_line(aes(y = var1, colour = “var1”)) #Apply to mpg ggplot(data=mpg, aes(hwy)) + geom_point(aes(y = displ, colour = “displ”)) + geom_point(aes(y = cyl, colour = “cyl”)) #Exercise: #Exercise with ArkCo_Income_2017 #1. Create a plot chart with the top 10 counties with the greatest percentage of low-income population #Your answer should look like this https://bit.ly/2BgPmyo #2. Create a plot chart with the top 10 counties with the greatest percentage of upper-income population 15.1 # R Data Cleaning title: “SFPD Calls for Service_Feb 23,2020” author: “Rob Wells” date: “2/23/2020” 15.1.1 Reporting on Homelessness: Data Analysis for Journalists 15.1.2 Jour 405v, Jour 5003, Spring 2020 "],["analysis-of-san-francisco-police-calls-for-service-data.html", "Chapter 16 Analysis of San Francisco Police Calls for Service Data", " Chapter 16 Analysis of San Francisco Police Calls for Service Data Here is the original dataset: 3,048,797 records https://data.sfgov.org/Public-Safety/Police-Department-Calls-for-Service/hz9m-tj6z/data This tutorial uses a subset of this data The Calls for Service were filtered as follows: CONTAINS homeless, 915, 919, 920: Downloaded 157,237 records 3/31/16 to 11/30/2019. This is 5.1% of all calls in the broader database. File renamed to: SF_311_Jan29.xlsx "],["part-1-quick-start.html", "Chapter 17 Part 1: Quick Start", " Chapter 17 Part 1: Quick Start library(tidyverse) library(janitor) library(lubridate) ## ## Attaching package: &#39;lubridate&#39; ## The following objects are masked from &#39;package:base&#39;: ## ## date, intersect, setdiff, union Reload Data SF &lt;- rio::import(&quot;https://github.com/profrobwells/HomelessSP2020/blob/master/Data/SF_311_Jan29.xlsx?raw=true&quot;, which = &quot;SF Police_Department_Calls_for_&quot;) Clean names, Process dates SF &lt;- janitor::clean_names(SF) #Process dates SF$call_date2 &lt;- ymd(SF$call_date) SF$year &lt;- year(SF$call_date2) Process dates Days &lt;- SF %&gt;% count(call_date2) %&gt;% group_by(call_date2) %&gt;% arrange(desc(n)) Types of Crimes Types &lt;- SF %&gt;% count(original_crime_type_name) %&gt;% group_by(original_crime_type_name) %&gt;% arrange(desc(n)) Calls by Year Years &lt;- SF %&gt;% count(year) %&gt;% group_by(year) %&gt;% arrange(desc(year)) Actions Taken Action &lt;- SF %&gt;% count(disposition) %&gt;% arrange(desc(n)) "],["part-2-cleaning-analysis.html", "Chapter 18 Part 2: Cleaning &amp; Analysis", " Chapter 18 Part 2: Cleaning &amp; Analysis Question: How many rows? Columns? Supply a list of the column names nrow(SF) [1] 157237 &gt; ncol(SF) [1] 14 Process dates, check file types str(SF) ## &#39;data.frame&#39;: 157237 obs. of 16 variables: ## $ crime_id : num 190040497 190200644 190213959 190271011 190141952 ... ## $ original_crime_type_name: chr &quot;919&quot; &quot;Homeless Complaint&quot; &quot;Homeless Complaint&quot; &quot;915&quot; ... ## $ report_date : POSIXct, format: &quot;2019-01-04&quot; &quot;2019-01-20&quot; ... ## $ call_date : POSIXct, format: &quot;2019-01-04&quot; &quot;2019-01-20&quot; ... ## $ offense_date : POSIXct, format: &quot;2019-01-04&quot; &quot;2019-01-20&quot; ... ## $ call_time : POSIXct, format: &quot;1899-12-31 06:58:00&quot; &quot;1899-12-31 06:19:00&quot; ... ## $ call_date_time : POSIXct, format: &quot;2019-01-04 06:58:00&quot; &quot;2019-01-20 06:19:00&quot; ... ## $ disposition : chr &quot;HAN&quot; &quot;HAN&quot; &quot;ADV&quot; &quot;HAN&quot; ... ## $ address : chr &quot;400 Block Of Jones St&quot; &quot;8th And Market&quot; &quot;Mission St/24th St&quot; &quot;Alabama St/23rd St&quot; ... ## $ city : chr &quot;San Francisco&quot; NA &quot;San Francisco&quot; &quot;San Francisco&quot; ... ## $ state : chr &quot;CA&quot; &quot;CA&quot; &quot;CA&quot; &quot;CA&quot; ... ## $ agency_id : num 1 1 1 1 1 1 1 1 1 1 ... ## $ address_type : chr &quot;Premise Address&quot; &quot;Geo-Override&quot; &quot;Intersection&quot; &quot;Intersection&quot; ... ## $ common_location : chr NA NA NA NA ... ## $ call_date2 : Date, format: &quot;2019-01-04&quot; &quot;2019-01-20&quot; ... ## $ year : num 2019 2019 2019 2019 2019 ... Examine how we have created a new date and year column and how they are formatted differently than the rest We can now perform date and year calculations Create Days Table Question: Using the summary() function, describe the minimum, maximum, median and mean of calls in the Days table summary(Days) ## call_date2 n ## Min. :2016-03-31 Min. : 10 ## 1st Qu.:2017-02-28 1st Qu.: 86 ## Median :2018-01-29 Median :119 ## Mean :2018-01-29 Mean :117 ## 3rd Qu.:2018-12-30 3rd Qu.:148 ## Max. :2019-11-30 Max. :232 Between March 31, 2016 and Nov. 30, 2019, San Francisco residents placed an average 117 calls to police complaining about homeless people. Question: Which day had the most calls? Which day had the least? Days %&gt;% filter(n == 232) ## # A tibble: 1 x 2 ## # Groups: call_date2 [1] ## call_date2 n ## &lt;date&gt; &lt;int&gt; ## 1 2019-08-15 232 Days %&gt;% filter(n == 10) ## # A tibble: 1 x 2 ## # Groups: call_date2 [1] ## call_date2 n ## &lt;date&gt; &lt;int&gt; ## 1 2016-03-31 10 Examine the types of events Types &lt;- SF %&gt;% count(original_crime_type_name) %&gt;% group_by(original_crime_type_name) %&gt;% arrange(desc(n)) Question: What are the top five complaints in this data and provide the number of complaints Types &lt;- SF %&gt;% count(original_crime_type_name) %&gt;% group_by(original_crime_type_name) %&gt;% arrange(desc(n)) Create separate table with just the top five counties’ crime rate: dplyr has a “top_n” function that i find handy Types &lt;- SF %&gt;% count(original_crime_type_name) %&gt;% top_n(5, n) %&gt;% arrange(desc(n)) Export a table into a spreadsheet (csv is a comma separated file) write.csv(Days,&quot;Days.csv&quot;) Build a table totalling the number of complaints by year Years &lt;- SF %&gt;% count(year) %&gt;% group_by(year) %&gt;% arrange(desc(year)) EXERCISE: Grouping by Disposition Look at the Radio Codes spreadsheet under dispositions https://data.sfgov.org/api/views/hz9m-tj6z/files/b60ee24c-ae7e-4f0b-a8d5-8f4bd29bf1de?download=true&amp;filename=Radio%20Codes%202016.xlsx Total by disposition Action &lt;- SF %&gt;% count(disposition) %&gt;% arrange(desc(n)) Ceate a table with serious infractions described in disposition Example: Here’s a table filtering the dispositions column to show “no disposition” or “gone on arrival” Nothing &lt;- SF %&gt;% filter(disposition == &quot;ND&quot; | disposition == &quot;GOA&quot;) Question: Create a table with the serious actions including citations and arrests police took in the dispositions Arrest, Cited, Criminal Activation, SF Fire Dept Medical Staff engaged Busted &lt;- SF %&gt;% filter(disposition == &quot;ARR&quot; | disposition == &quot;CIT&quot; | disposition == &quot;CRM&quot; | disposition == &quot;SFD&quot;) %&gt;% count(disposition) %&gt;% arrange(desc(n)) EXERCISE - A Basic chart of the crime data ggplot(Years, aes(x = year, y = n)) + geom_bar(stat = &quot;identity&quot;) + #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Homeless Calls Per Year, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 3/2016-11/2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Year&quot;) A chart using a dplyr filtering language Years %&gt;% filter(year &gt;= 2017) %&gt;% ggplot(aes(x = year, y = n)) + geom_bar(stat = &quot;identity&quot;) + #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Homeless Calls After 2017, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 2017-2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Year&quot;) A more complex filter SF %&gt;% filter(!is.na(common_location)) %&gt;% count(common_location) %&gt;% top_n(10, n) %&gt;% ggplot(aes(x = common_location, y = n)) + geom_bar(stat = &quot;identity&quot;) + coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Popular Spots for Homeless, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 2016-2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Places&quot;) Question: Chart the total dispositions. Filter for at least 100 actions. Add color, export image to Blackboard. Action %&gt;% filter(n &gt; 100) %&gt;% ggplot(aes(x = reorder(disposition, n), y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Action on Homeless Calls, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 3/2016-11/2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Action&quot;) "],["part-3-cleaning-dispositions.html", "Chapter 19 Part 3: Cleaning Dispositions", " Chapter 19 Part 3: Cleaning Dispositions Making our charts less ugly The disposition column is in cop-speak. We need to clean it up Step #1: Duplicate the column you want to mess with SF$disposition1 &lt;- SF$disposition Rename specific strings. Example: str_replace_all(test.vector, pattern=fixed(‘-’), replacement=fixed(‘:’) ) Details on string manipulation: https://dereksonderegger.github.io/570L/13-string-manipulation.html We can do this to replace ABA with “Abated” SF$disposition1 &lt;- str_replace_all(SF$disposition1, pattern=fixed(&#39;ABA&#39;), replacement=fixed(&#39;Abated&#39;) ) #Again with ADM SF$disposition1 &lt;- str_replace_all(SF$disposition1, pattern=fixed(&#39;ADM&#39;), replacement=fixed(&#39;Admonished&#39;) ) We can do that 19 times. OR…. Look at this example using a lookup table to replace all the values https://stackoverflow.com/questions/50615116/renaming-character-variables-in-a-column-in-data-frame-r Build a table to translate the Cop Speak to English: dispo_lkup &lt;- c(ABA=&quot;Abated&quot;, ADM=&quot;Admonish&quot;, ADV=&quot;Advised&quot;, ARR=&quot;Arrest&quot;, CAN=&quot;Cancel&quot;, CSA=&quot;CPSA&quot;, CIT=&quot;Cited&quot;, CRM=&quot;Criminal&quot;, GOA=&quot;Gone&quot;, HAN=&quot;Handled&quot;, NCR=&quot;No_Criminal&quot;, ND=&quot;No_Dispo&quot;, NOM=&quot;No_Merit&quot;, PAS=&quot;PlaceSecure&quot;, REP=&quot;Report&quot;, SFD=&quot;Medical&quot;, UTL=&quot;Unfound&quot;, VAS=&quot;Vehicle_Secure&quot;, &#39;22&#39;=&quot;Cancel&quot;) #22=&quot;Cancel&quot; was handled differently because it is a numeric value: &#39;22&#39;=&quot;Cancel&quot; #This scans &quot;disposition&quot;, finds ABA and replaces with Abated, finds ARR, replaces with Arrest, etc SF$disposition1 &lt;- as.character(dispo_lkup[SF$disposition]) Rerun Action with disposition1 Action &lt;- SF %&gt;% count(disposition1) %&gt;% arrange(desc(n)) Compare our renamed variables to the original disposition Action &lt;- SF %&gt;% count(disposition1, disposition) %&gt;% arrange(desc(n)) We have codes not listed on the sheet NA Not recorded 4339 Get rid of the space SF$disposition &lt;- gsub(&quot;Not recorded&quot;, &quot;Not_Recorded&quot;, SF$disposition) Add to the list dispo_lkup &lt;- c(ABA=&quot;Abated&quot;, ADM=&quot;Admonish&quot;, ADV=&quot;Advised&quot;, ARR=&quot;Arrest&quot;, CAN=&quot;Cancel&quot;, CSA=&quot;CPSA&quot;, CIT=&quot;Cited&quot;, CRM=&quot;Criminal&quot;, GOA=&quot;Gone&quot;, HAN=&quot;Handled&quot;, NCR=&quot;No_Criminal&quot;, ND=&quot;No_Dispo&quot;, NOM=&quot;No_Merit&quot;, PAS=&quot;PlaceSecure&quot;, REP=&quot;Report&quot;, SFD=&quot;Medical&quot;, UTL=&quot;Unfound&quot;, VAS=&quot;Vehicle_Secure&quot;, &#39;22&#39;=&quot;Cancel&quot;, Not_Recorded=&quot;NotRecorded&quot;) Rerun "],["section-1.html", "Chapter 20 ", " Chapter 20 Action &lt;- SF %&gt;% count(disposition1) %&gt;% arrange(desc(n)) Chart Dispositions Action %&gt;% filter(n &gt; 100) %&gt;% ggplot(aes(x = reorder(disposition1, n), y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Action on Homeless Calls, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 3/2016-11/2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Action&quot;) - Parse out police codes from narrative: original_crime_type_name Look at the Types table: some columns have one code, some have two. 919 2879 915 Sleeper 290 Some are separated by a slash 915/919 161 We need to unpack that - Cleaning Sequence #convert all text to lowercase SF$crime1 &lt;- tolower(SF$original_crime_type_name) #Replace / with a space SF$crime1 &lt;- gsub(&quot;/&quot;, &quot; &quot;, SF$crime1) #Replace &#39; SF$crime1 &lt;- gsub(&quot;&#39;&quot;, &quot;&quot;, SF$crime1) #fix space in homeless complaint SF$crime1 &lt;- gsub(&quot;homeless complaint&quot;, &quot;homeless_complaint&quot;, SF$crime1) #split data into two columns SF &lt;- separate(data = SF, col = crime1, into = c(&quot;crime2&quot;, &quot;crime3&quot;, &quot;crime4&quot;), sep = &quot; &quot;, extra = &quot;merge&quot;, fill = &quot;right&quot;) Look at the categories now Types2 &lt;- SF %&gt;% count(crime2) %&gt;% group_by(crime2) %&gt;% arrange(desc(n)) Question Take the top 10 crime categories from Type2 Relabel them from the numeric radio codes into English Using the technique earlier in “Build a table to translate the Cop Speak to English” Relabel the offenses clean &lt;- c(homeless_complaint=&quot;homeless_complaint&quot;, &#39;915&#39;=&quot;homeless_call&quot;, &#39;919&#39;=&quot;sit_lying&quot;, &#39;920&#39;=&quot;aggress_solicit&quot;, &#39;915s&#39;=&quot;homeless_call&quot;, &#39;915x&#39;=&quot;homeless_call&quot;, drugs=&quot;drugs&quot;, &#39;601&#39;=&quot;trespasser&quot;, poss=&quot;poss&quot;, aggressive=&quot;aggressive&quot;, &#39;811&#39;=&quot;intoxicated&quot;) SF$crime2 &lt;- as.character(clean[SF$crime2]) Look at the categories now Types2 &lt;- SF %&gt;% count(crime2) %&gt;% group_by(crime2) %&gt;% arrange(desc(n)) Question: Make a chart from your cleaned data Basic chart but with a messed up x axis Types2 %&gt;% ggplot(aes(x = crime2, y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;) + coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Top 10 Homeless Complaints, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 3/2016-11/2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Complaint&quot;) Chart with a fixed x axis scale; No values filtered out; Labels added to bars Types2 %&gt;% filter(!is.na(crime2)) %&gt;% #filter(crime2!=&quot; &quot;) %&gt;% - a crude alternative to previous line! ggplot(aes(x = reorder(crime2, n), y = n, fill=n)) + #reorder sorts the bars geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + geom_text(aes(label = n), hjust = -.1, size = 3) + scale_y_continuous(limits=c(0, 175000)) + #fixes scientific notation coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Top 10 Homeless Complaints, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data, 3/2016-11/2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Complaint&quot;) "],["part-4-using-mutate-pct-calcs.html", "Chapter 21 Part 4: Using Mutate, Pct Calcs", " Chapter 21 Part 4: Using Mutate, Pct Calcs mutate - Create new column(s) in the data, or change existing column(s). mutate() adds new variables and preserves existing Example: mtcars &lt;- as.data.frame(mtcars) View(mtcars) mtcars2 &lt;- mtcars %&gt;% as_tibble() %&gt;% mutate( cyl2 = cyl * 2, cyl4 = cyl2 * 2 ) Process dates using lubidate SF &lt;- SF %&gt;% mutate(yearmo = format(call_date, &quot;%Y-%m&quot;)) Chart the number of calls by year and month SF %&gt;% count(yearmo) %&gt;% group_by(yearmo) %&gt;% ggplot(aes(x = yearmo, y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;) + theme(axis.text.x = element_text(angle=90)) + #Changes angle of x axis labels #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Homeless Calls After 2017, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data by Month 2017-2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Year&quot;) Percentage change per month PCT_CHG_CALLS &lt;- SF %&gt;% select(original_crime_type_name, disposition, address, call_date2, yearmo) %&gt;% count(yearmo) %&gt;% mutate(difference = (n-lag(n))) %&gt;% mutate(pct_change = (difference/abs(lag(n)))*100) Use grepl to search and tabulate grep and grepl: see ??grep http://www.endmemo.com/program/R/grepl.php Cleaning Sequence #convert all text to lowercase SF$crime1 &lt;- tolower(SF$original_crime_type_name) Search for term, rename, put in new column called “cleaned” x915 &lt;- SF %&gt;% filter(grepl (&quot;915&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;homeless_complaint&quot;) x919 &lt;- SF %&gt;% filter(grepl (&quot;919&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;sitting_lying&quot;) xsleep &lt;- SF %&gt;% filter(grepl (&quot;sleep&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;sleep&quot;) xaggr &lt;- SF %&gt;% filter(grepl (&quot;aggr&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;aggressive&quot;) xdrug &lt;- SF %&gt;% filter(grepl (&quot;drug&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;drug&quot;) xhomeless &lt;- SF %&gt;% filter(grepl (&quot;homeless_complaint&quot;, crime2)) %&gt;% mutate(cleaned = &quot;homeless_complaint&quot;) #Moe, Brooke&#39;s Work: xnoise &lt;- SF %&gt;% filter(grepl (&quot;415&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;noise&quot;) xposs &lt;- SF %&gt;% filter(grepl (&quot;poss&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;possession&quot;) xtrespasser &lt;- SF %&gt;% filter(grepl (&quot;601&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;trespasser&quot;) xsolicit &lt;- SF %&gt;% filter(grepl (&quot;920&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;solicit&quot;) xinterview &lt;- SF %&gt;% filter(grepl (&quot;909&quot;, original_crime_type_name)) %&gt;% mutate(cleaned = &quot;interview&quot;) xtent &lt;- SF %&gt;% filter(grepl (&quot;tent&quot;, crime1)) %&gt;% mutate(cleaned=&quot;tent&quot;) xdog &lt;- SF %&gt;% filter(grepl (&quot;dog&quot;, crime1)) %&gt;% mutate(cleaned=&quot;dog&quot;) xchopshop &lt;- SF %&gt;% filter(grepl (&quot;chop shop&quot;, crime1)) %&gt;% mutate(cleaned=&quot;chopshop&quot;) xpanhandling &lt;- SF %&gt;% filter(grepl (&quot;panhandling&quot;, crime1)) %&gt;% mutate(cleaned=&quot;panhandling&quot;) xmusic &lt;- SF %&gt;% filter(grepl (&quot;music&quot;, crime1)) %&gt;% mutate(cleaned=&quot;music&quot;) Create new dataframe using rbind new_total &lt;- rbind(xhomeless, x915, x919, xaggr, xdrug, xsleep, xnoise, xposs, xtrespasser, xsolicit, xinterview, xtent, xdog, xchopshop, xpanhandling, xmusic) Count it up! Total_Calls_Master &lt;- new_total %&gt;% count(cleaned) %&gt;% arrange(desc(n)) #rename columns colnames(Total_Calls_Master)[1:2] &lt;- c(&quot;Complaints&quot;, &quot;Number&quot;) #export write_csv(Total_Calls_Master, &quot;Total_Calls_Master.csv&quot;) Make into html table #install.packages(&quot;kableExtra&quot;) library(kableExtra) ## ## Attaching package: &#39;kableExtra&#39; ## The following object is masked from &#39;package:dplyr&#39;: ## ## group_rows #This makes html tables called &quot;kables&quot; Total_Calls_Master %&gt;% kable() %&gt;% kable_styling(&quot;striped&quot;) Complaints Number homeless_complaint 153895 sitting_lying 3282 solicit 262 trespasser 100 sleep 77 interview 75 drug 52 noise 27 aggressive 18 dog 12 tent 9 music 8 chopshop 7 panhandling 5 possession 5 Export from Viewer as .png Task: Tabulate complaints by day of the week https://github.com/profrobwells/Data-Analysis-Class-Jour-405v-5003/blob/master/Readings/dealing-with-dates.pdf SF &lt;- SF %&gt;% mutate(weekday = wday(call_date, label=TRUE, abbr=FALSE)) Build a summary table with the days of the week with the greatest number of calls. Create a graphic. Then build a table to see if the complaints vary by day Below from Matthew Moore, Katy Seiter, Wells edited SF &lt;- SF %&gt;% mutate(weekday = wday(call_date, label=TRUE, abbr=FALSE)) Weekday_Count &lt;- SF %&gt;% select(weekday, crime_id) %&gt;% count(weekday) %&gt;% arrange(desc(n)) Graphic of calls by weekdays Weekday_Count %&gt;% ggplot(aes(x = weekday, y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + theme(axis.text.x = element_text(angle=90)) + #Changes angle of x axis labels #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Homeless Calls By Weekday in San Francisco&quot;, subtitle = &quot;SF PD Service Call Data 2017-2019&quot;, caption = &quot;Graphic by Moore and Seiter&quot;, y=&quot;Number of Calls&quot;, x=&quot;Weekday&quot;) Create a Bubble graphic ggplot(data = Weekday_Count) + geom_point(mapping = aes(x = weekday, y = n, size = n, color = n), show.legend = FALSE) + theme(axis.text.x = element_text(angle=90)) + labs(title = &quot;Homeless By Weekday in San Francisco&quot;, subtitle = &quot;SF PD Service Call Data 2017-2019: Source: SFPD&quot;, caption = &quot;Graphic by Moore and Seiter&quot;, y=&quot;Number of Calls&quot;, x=&quot;Weekday&quot;) Improved bubble chart # ggplot(Weekday_Count, aes(x = weekday, y = n)) + # xlab(&quot;Weekday&quot;) + # ylab(&quot;Number of Calls&quot;) + # theme_minimal(base_size = 12, base_family = &quot;Georgia&quot;) + # geom_point(aes(size = n, color = n), alpha = 0.7, show.legend = FALSE) + # scale_size_area(guide = FALSE, max_size = 15) + # labs(title = &quot;Homeless By Weekday in San Francisco&quot;, # subtitle = &quot;SF PD Service Call Data 2017-2019: Source: SFPD&quot;, # caption = &quot;Graphic by Moore and Seiter&quot;) Task #3: Calls vs Dispositions What calls resulted in arrests? What calls resulted in citations? Action2 &lt;- SF %&gt;% select(crime_id, original_crime_type_name, disposition) We need to pair the crime type and disposition and then count them From Michael Adkison: callsarrest &lt;- Action2 %&gt;% filter(grepl(&quot;ARR&quot;, disposition)) %&gt;% mutate(cleaned = &quot;Arrest&quot;) To quickly format into percents, load formattable #install.packages(&quot;formattable&quot;) library(formattable) callsarrest2 &lt;- callsarrest %&gt;% arrange(original_crime_type_name, disposition) %&gt;% count(original_crime_type_name) %&gt;% #mutate(PctTotal = (n/441)) %&gt;% arrange(desc(n)) colnames(callsarrest2)[1:2] &lt;- c(&quot;Complaints&quot;, &quot;Arrests&quot;) Build a table to translate the Cop Speak to English: clean &lt;- c(&#39;Homeless Complaint&#39;=&quot;homeless_complaint&quot;, homeless_complaint=&quot;homeless_complaint&quot;, &#39;915&#39;=&quot;homeless_complaint&quot;, &#39;919&#39;=&quot;Sit_lying&quot;, &#39;920&#39;=&quot;Aggress_solicit&quot;, &#39;915s&#39;=&quot;homeless_complaint&quot;, &#39;915x&#39;=&quot;homeless_complaint&quot;, drugs=&quot;drugs&quot;, &#39;601&#39;=&quot;trespasser&quot;, poss=&quot;poss&quot;, aggressive=&quot;aggressive&quot;, &#39;811&#39;=&quot;intoxicated&quot;, &#39;Drugs / 915&#39;=&quot;Drugs&quot;, &#39;Drugs/915&#39;=&quot;Drugs&quot;) This scans “disposition”, finds ABA and replaces with Abated, finds ARR, replaces with Arrest, etc callsarrest2\\(Complaints &lt;- as.character(clean[callsarrest2\\)Complaints]) callsarrest3 &lt;- callsarrest2 %&gt;% select(Complaints, Arrests) %&gt;% group_by(Complaints) %&gt;% summarise(total = sum(Arrests)) %&gt;% mutate(PctTotal = (total/441)) %&gt;% arrange(desc(total)) colnames(callsarrest3)[2] &lt;- &quot;Arrests&quot; callsarrest3$PctTotal &lt;- percent(callsarrest3$PctTotal) #This makes kables callsarrest3 %&gt;% kable() %&gt;% kable_styling(&quot;striped&quot;) Complaints Arrests PctTotal Homeless Complaint 412 93.42% 915 19 4.31% 919 4 0.91% 920 2 0.45% 601 / 915 1 0.23% 915 / 909 1 0.23% Drugs / 915 1 0.23% Drugs/915 1 0.23% "],["part-5-trends-over-time.html", "Chapter 22 Part 5: Trends over time", " Chapter 22 Part 5: Trends over time Question: What were the common days for arrests? SF %&gt;% select(weekday, crime_id, disposition) %&gt;% filter(grepl(&quot;ARR&quot;, disposition)) %&gt;% count(weekday) ## weekday n ## 1 Sunday 47 ## 2 Monday 63 ## 3 Tuesday 79 ## 4 Wednesday 77 ## 5 Thursday 74 ## 6 Friday 56 ## 7 Saturday 45 Make bubble chart # SF %&gt;% # select(weekday, crime_id, disposition) %&gt;% # filter(grepl(&quot;ARR&quot;, disposition)) %&gt;% # count(weekday) %&gt;% # ggplot(aes(x = weekday, y = n)) + # xlab(&quot;Weekday&quot;) + # ylab(&quot;Arrests&quot;) + # theme_minimal(base_size = 12, base_family = &quot;Georgia&quot;) + # geom_point(aes(size = n, color = n), alpha = 0.7, show.legend = FALSE) + # scale_size_area(guide = FALSE, max_size = 15) + # labs(title = &quot;Homeless Arrests By Weekday in San Francisco&quot;, # subtitle = &quot;SF PD Service Call Data 2017-2019: Source: SFPD&quot;, # caption = &quot;Graphic by Wells&quot;) Question: What is the trend for arrests over the time period? SF %&gt;% filter(grepl(&quot;ARR&quot;, disposition)) %&gt;% count(yearmo) %&gt;% group_by(yearmo) %&gt;% ggplot(aes(x = yearmo, y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + geom_smooth(method = lm, se=FALSE, color = &quot;red&quot;) + theme(axis.text.x = element_text(angle=90)) + #Changes angle of x axis labels #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Arrest Trends on Homeless Calls in San Francisco&quot;, subtitle = &quot;Arrests Based on SF PD Service Call Data by Month 2017-2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Year&quot;) ## `geom_smooth()` using formula &#39;y ~ x&#39; Question: What are the hours most likely for complaints? #format to hours SF$hour &lt;- hour(SF$call_date_time) SF %&gt;% count(hour) %&gt;% group_by(hour) %&gt;% ggplot(aes(x = hour, y = n, fill=n)) + geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) + theme(axis.text.x = element_text(angle=90)) + #Changes angle of x axis labels #coord_flip() + #this makes it a horizontal bar chart instead of vertical labs(title = &quot;Hours of Homeless Calls, San Francisco&quot;, subtitle = &quot;SF PD Service Call Data by Month 2017-2019&quot;, caption = &quot;Graphic by Wells&quot;, y=&quot;Number of Calls&quot;, x=&quot;Hour&quot;) - Question: Examine some of the charting options on this tutorial and adapt them to this data using any chart you want # https://paldhous.github.io/wcsj/2017/ "],["section-2.html", "Chapter 23 –30–", " Chapter 23 –30– "]]
